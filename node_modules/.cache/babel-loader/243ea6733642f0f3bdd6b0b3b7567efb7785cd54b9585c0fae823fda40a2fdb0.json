{"ast":null,"code":"import _objectSpread from\"C:/apps/beehive/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useContext,createContext,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AppContext=/*#__PURE__*/createContext(null);const USERS=[{id:1,name:\"Sarah Johnson\",role:\"Employee\",department:\"Sales\"},{id:2,name:\"Michael Chen\",role:\"Manager\",department:\"Sales\"},{id:3,name:\"Emily Davis\",role:\"Employee\",department:\"Hr\"},{id:4,name:\"James Wilson\",role:\"Employee\",department:\"Marketing\"},{id:5,name:\"Lisa Anderson\",role:\"Employee\",department:\"Finance\"},{id:6,name:\"David Brown\",role:\"Employee\",department:\"Support\"},{id:7,name:\"Rachel Green\",role:\"Manager\",department:\"Marketing\"},{id:8,name:\"Tom Harris\",role:\"Manager\",department:\"Hr\"},{id:9,name:\"System Admin\",role:\"Admin\",department:\"Sales\"}];const INITIAL_MESSAGES=[{id:1,from:\"William Taylor\",subject:\"Payment Failed\",body:\"Our payment just failed and our account is locked. We need immediate assistance as this is affecting our production environment.\",channel:\"chat\",priority:\"Urgent\",confidence:\"High Confidence\",department:\"Finance\",status:\"pending\",assignedTo:5,date:\"1/22/2026\",contactInfo:\"william@company.com\",priorityReason:\"The message reports an account access issue and uses time-sensitive language ('locked', 'immediate assistance'), indicating a potential operational disruption affecting production.\",confidenceReason:\"The message contains clear financial terminology and an explicit account status issue, making classification straightforward.\",internalNotes:[],changeLog:[],needsReview:false},{id:2,from:\"Karen White\",subject:\"Password Reset Issue\",body:\"I've tried resetting my password 3 times but I'm not receiving the reset email. Can someone help?\",channel:\"email\",priority:\"Medium\",confidence:\"Medium Confidence\",department:\"Support\",status:\"assigned\",assignedTo:6,date:\"1/22/2026\",contactInfo:\"karen@email.com\",priorityReason:\"The message contains a clear request but does not indicate immediate impact or time sensitivity. The issue is frustrating but does not suggest operational disruption.\",confidenceReason:\"The message uses terminology common to both support and account management, requiring some judgment in routing.\",internalNotes:[],changeLog:[],needsReview:false},{id:3,from:\"Sophie Turner\",subject:\"Benefits Inquiry\",body:\"CALL TRANSCRIPT - Duration: 4m 18s Agent: HR Department, this is Tom speaking. How may I assist you? Sophie Turner: Hi Tom, I just started last Monday and I had some questions about the health benefits.\",channel:\"phone\",priority:\"Low\",confidence:\"Medium Confidence\",department:\"Hr\",status:\"assigned\",assignedTo:8,date:\"1/22/2026\",contactInfo:\"sophie@email.com\",priorityReason:\"The message is informational and does not suggest urgency, deadlines, or negative consequences if delayed. This is a routine onboarding inquiry.\",confidenceReason:\"Phone transcripts can sometimes lose nuance, and the HR/benefits topic could overlap with other departments.\",internalNotes:[],changeLog:[],needsReview:false},{id:4,from:\"Maria Garcia\",subject:\"Critical System Outage\",body:\"CALL TRANSCRIPT - Duration: 8m 32s Agent: Thank you for calling support, this is David. How can I help you today? Maria Garcia: Hi yes, we're having a major emergency here. Our entire system just went down.\",channel:\"phone\",priority:\"Urgent\",confidence:\"High Confidence\",department:\"Support\",status:\"in-process\",assignedTo:6,date:\"1/22/2026\",contactInfo:\"maria@company.com\",priorityReason:\"The message reports a service disruption and uses explicit urgency language ('major emergency', 'entire system'), indicating potential operational impact.\",confidenceReason:\"The message contains clear support terminology and an explicit system outage scenario, making classification highly confident.\",internalNotes:[],changeLog:[],needsReview:false},{id:5,from:\"John Smith\",subject:\"Enterprise License Inquiry\",body:\"Hello, I'm interested in purchasing an enterprise license for our team of 150 employees. Could you provide pricing information and schedule a demo?\",channel:\"email\",priority:\"Urgent\",confidence:\"High Confidence\",department:\"Sales\",status:\"assigned\",assignedTo:1,date:\"1/22/2026\",contactInfo:\"john@bigcorp.com\",priorityReason:\"The message represents a high-value sales opportunity with a specific team size mentioned (150 employees), suggesting urgency to respond before the prospect looks elsewhere.\",confidenceReason:\"This message uses terminology specific to sales and has clear and direct language, making classification highly confident.\",internalNotes:[],changeLog:[],needsReview:false},{id:6,from:\"Daniel Martinez\",subject:\"Trial Extension Request\",body:\"Our trial is ending tomorrow but we need another week to complete our evaluation. Our CTO is out of town. Can we extend?\",channel:\"email\",priority:\"Medium\",confidence:\"High Confidence\",department:\"Sales\",status:\"in-process\",assignedTo:1,date:\"1/22/2026\",contactInfo:\"daniel@startup.io\",priorityReason:\"The message has a time-sensitive element (trial ending tomorrow) but does not indicate immediate negative impact or service disruption.\",confidenceReason:\"Trial extension requests are common sales department tasks with clear, unambiguous language.\",internalNotes:[],changeLog:[],needsReview:false},{id:7,from:\"@TechStartupXYZ\",subject:\"Partnership Opportunity\",body:\"We love your product! We're a tech startup with 50K followers and would love to explore a partnership or affiliate program.\",channel:\"social\",priority:\"Medium\",confidence:\"Low Confidence\",department:\"Marketing\",status:\"assigned\",assignedTo:4,date:\"1/22/2026\",contactInfo:\"@TechStartupXYZ\",priorityReason:\"The message contains a clear request but does not indicate immediate impact or time sensitivity. Partnership discussions can be scheduled.\",confidenceReason:\"Social media partnership requests could fall under both marketing and sales, requiring judgment in routing.\",internalNotes:[],changeLog:[],needsReview:true},{id:8,from:\"Patricia Moore\",subject:\"Feature Request - Dark Mode\",body:\"Would love to see a dark mode option in the dashboard. Many of us work late hours and it would be easier on the eyes.\",channel:\"email\",priority:\"Medium\",confidence:\"Low Confidence\",department:\"Support\",status:\"assigned\",assignedTo:6,date:\"1/22/2026\",contactInfo:\"patricia@email.com\",priorityReason:\"The message contains a clear request but does not indicate immediate impact or time sensitivity. Feature requests are valuable but rarely urgent.\",confidenceReason:\"Feature requests can be directed to support, product, or engineering teams depending on organisational structure.\",internalNotes:[],changeLog:[],needsReview:true},{id:9,from:\"Robert Kim\",subject:\"Invoice Discrepancy\",body:\"We received invoice #INV-2024-1234 but the amount doesn't match our contract terms. We were quoted $5,000/month but the invoice shows $6,500.\",channel:\"email\",priority:\"Urgent\",confidence:\"High Confidence\",department:\"Finance\",status:\"in-process\",assignedTo:5,date:\"1/22/2026\",contactInfo:\"robert@company.com\",priorityReason:\"The message reports a financial discrepancy with specific figures, suggesting a potential billing error that could affect the business relationship.\",confidenceReason:\"Invoice and billing issues are clearly finance department matters with unambiguous financial terminology.\",internalNotes:[],changeLog:[],needsReview:false},{id:10,from:\"Alex Thompson\",subject:\"Job Application - Senior Developer\",body:\"I am writing to express my interest in the Senior Developer position. I have 8 years of experience in React and Node.js.\",channel:\"email\",priority:\"Medium\",confidence:\"High Confidence\",department:\"Hr\",status:\"pending\",assignedTo:3,date:\"1/21/2026\",contactInfo:\"alex@dev.com\",priorityReason:\"The message contains a clear request but does not indicate immediate impact. Job applications follow a standard review process.\",confidenceReason:\"Job applications are clearly HR department matters with standard professional language.\",internalNotes:[],changeLog:[],needsReview:false},{id:11,from:\"Jennifer Lee\",subject:\"Pricing Question\",body:\"What's the difference between the Pro and Enterprise plans?\",channel:\"chat\",priority:\"Low\",confidence:\"High Confidence\",department:\"Sales\",status:\"resolved\",assignedTo:2,date:\"1/21/2026\",contactInfo:\"jennifer@email.com\",priorityReason:\"The message is informational and does not suggest urgency, deadlines, or negative consequences if delayed.\",confidenceReason:\"Pricing inquiries are straightforward sales department questions.\",internalNotes:[],changeLog:[],needsReview:false},{id:12,from:\"@HappyCustomer\",subject:\"Positive Feedback\",body:\"Just wanted to say your customer service team is amazing! They helped me resolve my issue in under 10 minutes. 5 stars!\",channel:\"social\",priority:\"Low\",confidence:\"Low Confidence\",department:\"Marketing\",status:\"resolved\",assignedTo:7,date:\"1/21/2026\",contactInfo:\"@HappyCustomer\",priorityReason:\"The message is positive feedback with no action required beyond acknowledgment. No urgency or negative consequences if delayed.\",confidenceReason:\"Positive feedback on social media could be monitored by marketing, support, or customer success teams.\",internalNotes:[],changeLog:[],needsReview:false}];const SYSTEM_NOTIFICATIONS=[{id:1,icon:\"ðŸ¤–\",title:\"AI Classification Updated\",body:\"Confidence thresholds for social channel messages have been recalibrated. Low-confidence routing now defaults to human review.\",time:\"2 min ago\",read:false},{id:2,icon:\"ðŸ”§\",title:\"New Capability: Telephony\",body:\"Phone call transcription is now active. Call transcripts will appear automatically in your message queue.\",time:\"1 hour ago\",read:false},{id:3,icon:\"ðŸš¨\",title:\"Urgent Message Unassigned\",body:\"William Taylor's 'Payment Failed' message has been pending for over 30 minutes without assignment.\",time:\"2 hours ago\",read:true},{id:4,icon:\"ðŸ“Š\",title:\"Routing Rules Updated\",body:\"Finance department routing now prioritises messages containing invoice or billing keywords.\",time:\"Yesterday\",read:true}];const getPriorityColor=p=>p===\"Urgent\"?\"text-red-600 bg-red-50 border-red-200\":p===\"Medium\"?\"text-amber-600 bg-amber-50 border-amber-200\":\"text-green-600 bg-green-50 border-green-200\";const getPriorityIcon=p=>p===\"Urgent\"?\"ðŸ”´\":p===\"Medium\"?\"ðŸŸ¡\":\"ðŸŸ¢\";const getConfidenceColor=c=>c===\"High Confidence\"?\"text-green-600 bg-green-50 border-green-200\":c===\"Medium Confidence\"?\"text-amber-600 bg-amber-50 border-amber-200\":\"text-red-600 bg-red-50 border-red-200\";const getConfidenceIcon=c=>c===\"High Confidence\"?\"âœ…\":c===\"Medium Confidence\"?\"âš ï¸\":\"âŒ\";const getStatusColor=s=>s===\"pending\"?\"text-gray-600 bg-gray-100\":s===\"assigned\"?\"text-blue-600 bg-blue-100\":s===\"in-process\"?\"text-purple-600 bg-purple-100\":\"text-green-600 bg-green-100\";const getChannelIcon=ch=>ch===\"email\"?\"âœ‰\":ch===\"phone\"?\"ðŸ“ž\":ch===\"chat\"?\"ðŸ’¬\":ch===\"social\"?\"#\":\"ðŸ“±\";const getUserById=id=>USERS.find(u=>u.id===id);const getInitials=name=>name.split(\" \").map(n=>n[0]).join(\"\").slice(0,2);const AVATAR_COLORS=[\"bg-violet-500\",\"bg-blue-500\",\"bg-green-500\",\"bg-orange-500\",\"bg-pink-500\",\"bg-teal-500\",\"bg-red-500\",\"bg-indigo-500\",\"bg-amber-500\"];function Avatar(_ref){let{name,size=\"md\"}=_ref;const idx=name.charCodeAt(0)%AVATAR_COLORS.length;const sz=size===\"sm\"?\"w-7 h-7 text-xs\":size===\"lg\"?\"w-10 h-10 text-sm\":\"w-8 h-8 text-xs\";return/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(sz,\" \").concat(AVATAR_COLORS[idx],\" rounded-full flex items-center justify-center text-white font-bold flex-shrink-0\"),children:getInitials(name)});}function Tooltip(_ref2){let{text,children}=_ref2;const[show,setShow]=useState(false);return/*#__PURE__*/_jsxs(\"span\",{className:\"relative inline-flex items-center\",onMouseEnter:()=>setShow(true),onMouseLeave:()=>setShow(false),onClick:()=>setShow(s=>!s),children:[children,show&&/*#__PURE__*/_jsxs(\"span\",{className:\"absolute z-50 bottom-full left-0 mb-2 w-64 text-xs bg-gray-900 text-white rounded-lg p-2.5 shadow-xl leading-relaxed pointer-events-none\",children:[text,/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-full left-4 -mt-1 border-4 border-transparent border-t-gray-900\"})]})]});}function PriorityBadge(_ref3){let{message}=_ref3;return/*#__PURE__*/_jsx(Tooltip,{text:message.priorityReason,children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full border flex items-center gap-1 cursor-help \".concat(getPriorityColor(message.priority)),children:[getPriorityIcon(message.priority),\" \",message.priority]})});}function ConfidenceBadge(_ref4){let{message}=_ref4;return/*#__PURE__*/_jsx(Tooltip,{text:message.confidenceReason,children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full border flex items-center gap-1 cursor-help \".concat(getConfidenceColor(message.confidence)),children:[getConfidenceIcon(message.confidence),\" \",message.confidence]})});}// G2: Data quality warning\nfunction DataWarningBanner(_ref5){let{message,darkMode}=_ref5;const missing=[];if(!message.contactInfo||message.contactInfo===\"Unknown\")missing.push(\"contact info\");if(message.confidence===\"Low Confidence\")missing.push(\"confident classification\");if(missing.length===0)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2 p-2.5 rounded-lg text-xs border \".concat(darkMode?\"bg-amber-900/20 border-amber-700/40 text-amber-300\":\"bg-amber-50 border-amber-200 text-amber-800\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex-shrink-0 mt-0.5\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"AI confidence is limited\"}),\" \\u2014 this message has \",missing.join(\" and \"),\". Human review is recommended before routing.\"]})]});}// G3: Urgent unassigned alert\nfunction UrgentAlert(_ref6){let{messages,dismissed,onDismiss,darkMode}=_ref6;const items=messages.filter(m=>m.priority===\"Urgent\"&&m.status===\"pending\"&&!dismissed.includes(m.id));if(!items.length)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"mx-3 mt-2 rounded-lg border p-2.5 \".concat(darkMode?\"bg-red-900/20 border-red-700/40\":\"bg-red-50 border-red-200\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-semibold flex items-center gap-1 \".concat(darkMode?\"text-red-300\":\"text-red-700\"),children:[\"\\uD83D\\uDEA8 \",items.length,\" Urgent \",items.length>1?\"messages need\":\"message needs\",\" immediate attention\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>items.forEach(m=>onDismiss(m.id)),className:\"text-xs \".concat(darkMode?\"text-red-400\":\"text-red-500\",\" hover:underline\"),children:\"Dismiss all\"})]}),items.map(m=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs flex items-center justify-between py-0.5 \".concat(darkMode?\"text-red-300\":\"text-red-600\"),children:[/*#__PURE__*/_jsxs(\"span\",{children:[m.from,\" \\u2014 \",m.subject]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDismiss(m.id),className:\"ml-2 opacity-50 hover:opacity-100\",children:\"\\u2715\"})]},m.id))]});}// G16: Confirm dialog\nfunction ConfirmDialog(_ref7){let{title,message,onConfirm,onCancel,darkMode}=_ref7;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\",onClick:onCancel,children:/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl shadow-2xl w-full max-w-sm mx-4 p-5 \".concat(darkMode?\"bg-gray-800 text-white\":\"bg-white text-gray-900\"),onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-base font-semibold mb-2\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm mb-4 \".concat(darkMode?\"text-gray-300\":\"text-gray-600\"),children:message}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"flex-1 border rounded-lg py-2 text-sm \".concat(darkMode?\"border-gray-600 text-gray-300\":\"border-gray-200 text-gray-600\"),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onConfirm,className:\"flex-1 bg-amber-500 text-white rounded-lg py-2 text-sm font-medium hover:bg-amber-600\",children:\"Confirm\"})]})]})});}// G18: Notification panel\nfunction NotificationPanel(_ref8){let{onClose,darkMode}=_ref8;const[notifs,setNotifs]=useState(SYSTEM_NOTIFICATIONS);const unread=notifs.filter(n=>!n.read).length;const markRead=id=>setNotifs(n=>n.map(x=>x.id===id?_objectSpread(_objectSpread({},x),{},{read:true}):x));const markAll=()=>setNotifs(n=>n.map(x=>_objectSpread(_objectSpread({},x),{},{read:true})));return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex justify-end\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-sm h-full shadow-2xl flex flex-col \".concat(darkMode?\"bg-gray-800\":\"bg-white\"),onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b \".concat(darkMode?\"border-gray-700\":\"border-gray-200\"),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-sm \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"Notifications\"}),unread>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs bg-amber-500 text-white px-1.5 py-0.5 rounded-full\",children:[unread,\" new\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[unread>0&&/*#__PURE__*/_jsx(\"button\",{onClick:markAll,className:\"text-xs text-amber-600 hover:underline\",children:\"Mark all read\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:notifs.map(n=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>markRead(n.id),className:\"p-4 border-b cursor-pointer transition-colors \".concat(!n.read?darkMode?\"bg-amber-900/10 border-gray-700\":\"bg-amber-50 border-amber-100\":darkMode?\"border-gray-700 hover:bg-gray-700/50\":\"border-gray-100 hover:bg-gray-50\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl flex-shrink-0\",children:n.icon}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-0.5\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-semibold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:n.title}),!n.read&&/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-amber-500 rounded-full flex-shrink-0\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs leading-relaxed \".concat(darkMode?\"text-gray-400\":\"text-gray-600\"),children:n.body}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs mt-1 block \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:n.time})]})]})},n.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 border-t text-xs text-center italic \".concat(darkMode?\"border-gray-700 text-gray-500\":\"border-gray-100 text-gray-400\"),children:\"AI behaviour changes are always communicated here before taking effect\"})]})});}// G1: Capability banner\nfunction CapabilityBanner(_ref9){let{role,onDismiss,darkMode}=_ref9;const caps=role===\"Manager\"||role===\"Admin\"?[\"View, assign & reprioritise all inbound messages\",\"AI classifies priority, department & routing confidence\",\"Override any AI suggestion â€” you have final control\",\"Analytics dashboard shows team workload and trends\"]:[\"View messages assigned to you\",\"AI has pre-classified priority and department\",\"Add internal notes and update message status\",\"Hover any priority or confidence badge to see AI reasoning\"];return/*#__PURE__*/_jsx(\"div\",{className:\"mx-3 mt-2 rounded-lg border p-3 \".concat(darkMode?\"bg-blue-900/20 border-blue-700/40\":\"bg-blue-50 border-blue-200\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-semibold mb-1.5 \".concat(darkMode?\"text-blue-300\":\"text-blue-800\"),children:[\"\\uD83E\\uDD16 What AI does in BeeHive (\",role,\" view)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-1\",children:caps.map((c,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs flex items-start gap-1 \".concat(darkMode?\"text-blue-300\":\"text-blue-700\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex-shrink-0\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:c})]},i))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onDismiss,className:\"text-xs flex-shrink-0 mt-0.5 \".concat(darkMode?\"text-blue-400\":\"text-blue-600\",\" hover:underline\"),children:\"Got it \\u2715\"})]})});}function Header(_ref0){let{view,setView,currentUser,onSettingsOpen,onNotifOpen,unreadCount,darkMode}=_ref0;return/*#__PURE__*/_jsxs(\"header\",{className:\"flex items-center justify-between px-4 h-14 border-b flex-shrink-0 \".concat(darkMode?\"bg-gray-900 border-gray-700\":\"bg-white border-gray-200\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center text-white font-bold\",children:\"\\uD83D\\uDC1D\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden sm:block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-bold leading-tight \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"Beehive\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs leading-tight \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Communications Hub\"})]})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex items-center gap-1\",children:currentUser.role===\"Admin\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView(\"messages\"),className:\"text-xs px-3 py-1.5 rounded-lg font-medium transition-colors \".concat(view===\"messages\"?\"bg-amber-100 text-amber-700 border border-amber-300\":darkMode?\"text-gray-300 hover:bg-gray-800\":\"text-gray-600 hover:bg-gray-100\"),children:\"Messages\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView(\"dashboard\"),className:\"text-xs px-3 py-1.5 rounded-lg font-medium transition-colors \".concat(view===\"dashboard\"?\"bg-amber-100 text-amber-700 border border-amber-300\":darkMode?\"text-gray-300 hover:bg-gray-800\":\"text-gray-600 hover:bg-gray-100\"),children:\"\\uD83D\\uDCCA Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView(\"integrations\"),className:\"text-xs px-3 py-1.5 rounded-lg font-medium transition-colors \".concat(view===\"integrations\"?\"bg-amber-100 text-amber-700 border border-amber-300\":darkMode?\"text-gray-300 hover:bg-gray-800\":\"text-gray-600 hover:bg-gray-100\"),children:\"\\uD83D\\uDD17 Integrations\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView(\"messages\"),className:\"text-xs px-3 py-1.5 rounded-lg font-medium transition-colors \".concat(view===\"messages\"?\"bg-amber-100 text-amber-700 border border-amber-300\":darkMode?\"text-gray-300 hover:bg-gray-800\":\"text-gray-600 hover:bg-gray-100\"),children:\"Messages\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView(\"dashboard\"),className:\"text-xs px-3 py-1.5 rounded-lg font-medium transition-colors \".concat(view===\"dashboard\"?\"bg-amber-100 text-amber-700 border border-amber-300\":darkMode?\"text-gray-300 hover:bg-gray-800\":\"text-gray-600 hover:bg-gray-100\"),children:\"\\uD83D\\uDCCA Dashboard\"}),currentUser.role===\"Manager\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView(\"integrations\"),className:\"text-xs px-3 py-1.5 rounded-lg font-medium transition-colors \".concat(view===\"integrations\"?\"bg-amber-100 text-amber-700 border border-amber-300\":darkMode?\"text-gray-300 hover:bg-gray-800\":\"text-gray-600 hover:bg-gray-100\"),children:\"\\uD83D\\uDD17 Integrations\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onNotifOpen,className:\"p-1.5 rounded-lg relative \".concat(darkMode?\"text-gray-300 hover:bg-gray-800\":\"text-gray-500 hover:bg-gray-100\"),children:[\"\\uD83D\\uDD14\",unreadCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-0.5 -right-0.5 w-4 h-4 bg-red-500 rounded-full text-white text-xs flex items-center justify-center font-bold leading-none\",children:unreadCount})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onSettingsOpen,className:\"p-1.5 rounded-lg \".concat(darkMode?\"text-gray-300 hover:bg-gray-800\":\"text-gray-500 hover:bg-gray-100\"),children:\"\\u2699\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hidden sm:block text-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:currentUser.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:currentUser.role})]}),/*#__PURE__*/_jsx(Avatar,{name:currentUser.name})]})]})]});}function SettingsModal(_ref1){let{user,onClose,darkMode,toggleDarkMode,onLogout}=_ref1;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md mx-4 rounded-xl shadow-2xl \".concat(darkMode?\"bg-gray-800 text-white\":\"bg-white text-gray-900\"),onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-5 border-b \".concat(darkMode?\"border-gray-700\":\"border-gray-200\"),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold\",children:\"Settings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium mb-3\",children:\"\\uD83D\\uDC64 Profile Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3 mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{readOnly:true,value:user.name,className:\"w-full border rounded-lg px-3 py-2 text-sm \".concat(darkMode?\"bg-gray-700 border-gray-600 text-white\":\"bg-gray-50 border-gray-200\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Role\"}),/*#__PURE__*/_jsx(\"input\",{readOnly:true,value:user.role,className:\"w-full border rounded-lg px-3 py-2 text-sm \".concat(darkMode?\"bg-gray-700 border-gray-600 text-white\":\"bg-gray-50 border-gray-200\")})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:\"Profile information is managed by your organisation administrator.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium mb-3\",children:\"\\uD83D\\uDD14 Notification Preferences\"}),[[\"Email Notifications\",\"Receive updates via email\"],[\"In-App Notifications\",\"Show notifications within the app\"]].map(_ref10=>{let[l,d]=_ref10;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:l}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:d})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-10 h-5 bg-amber-500 rounded-full relative\",children:/*#__PURE__*/_jsx(\"span\",{className:\"absolute right-0.5 top-0.5 w-4 h-4 bg-white rounded-full\"})})]},l);})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium mb-3\",children:\"\\uD83C\\uDFA8 Interface Preferences\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:\"Dark Mode\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:\"Use dark theme throughout the app\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleDarkMode,className:\"w-10 h-5 rounded-full relative transition-colors \".concat(darkMode?\"bg-amber-500\":\"bg-gray-300\"),children:/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-0.5 w-4 h-4 bg-white rounded-full transition-all \".concat(darkMode?\"right-0.5\":\"left-0.5\")})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-5 pt-0\",children:/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,className:\"w-full bg-red-500 text-white py-2.5 rounded-lg text-sm font-medium hover:bg-red-600\",children:\"\\uD83D\\uDEAA Log Out\"})})]})});}function MessageListItem(_ref11){let{message,selected,onClick,darkMode}=_ref11;const assignee=getUserById(message.assignedTo);return/*#__PURE__*/_jsxs(\"div\",{onClick:onClick,className:\"p-3 border-b cursor-pointer transition-colors relative \".concat(selected?darkMode?\"bg-amber-900/30 border-l-2 border-l-amber-500\":\"bg-amber-50 border-l-2 border-l-amber-500\":darkMode?\"hover:bg-gray-800 border-gray-700\":\"hover:bg-gray-50 border-gray-100\"),children:[message.needsReview&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-2 right-2 text-xs px-1.5 py-0.5 rounded-full font-medium \".concat(darkMode?\"bg-amber-900/50 text-amber-300 border border-amber-700\":\"bg-amber-100 text-amber-700\"),children:\"\\uD83D\\uDC41 Review\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-base mt-0.5\",children:getChannelIcon(message.channel)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0 pr-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-0.5\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium truncate \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:message.from}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs flex-shrink-0 ml-2 \".concat(darkMode?\"text-gray-400\":\"text-gray-400\"),children:message.date})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium mb-1 truncate \".concat(darkMode?\"text-gray-300\":\"text-gray-700\"),children:message.subject}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mb-2 line-clamp-2 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:message.body}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-1\",children:[/*#__PURE__*/_jsx(PriorityBadge,{message:message}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full \".concat(getStatusColor(message.status)),children:message.status}),/*#__PURE__*/_jsx(ConfidenceBadge,{message:message}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full \".concat(darkMode?\"bg-gray-700 text-gray-300\":\"bg-gray-100 text-gray-600\"),children:message.department.toLowerCase()}),assignee&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-400\"),children:[\"\\u2192 \",assignee.name]})]})]})]})]});}function MessageDetail(_ref12){var _localMsg$changeLog,_localMsg$changeLog2;let{message,onClose,isManager,onUpdate,currentUser,darkMode}=_ref12;const[note,setNote]=useState(\"\");const[localMsg,setLocalMsg]=useState(message);const[confirm,setConfirm]=useState(null);const[showLog,setShowLog]=useState(false);useEffect(()=>{setLocalMsg(message);},[message]);const inputCls=\"w-full border rounded-lg px-3 py-2 text-sm \".concat(darkMode?\"bg-gray-700 border-gray-600 text-white\":\"bg-gray-50 border-gray-200 text-gray-900\");// G9 + G6: apply change with audit log\nconst applyChange=(field,val)=>{var _getUserById,_getUserById2;const entry={field,from:String(field===\"assignedTo\"?(_getUserById=getUserById(localMsg[field]))===null||_getUserById===void 0?void 0:_getUserById.name:localMsg[field]),to:String(field===\"assignedTo\"?(_getUserById2=getUserById(+val))===null||_getUserById2===void 0?void 0:_getUserById2.name:val),user:currentUser.name,time:new Date().toLocaleTimeString()};const updated=_objectSpread(_objectSpread({},localMsg),{},{[field]:field===\"assignedTo\"?+val:val,changeLog:[...(localMsg.changeLog||[]),entry],needsReview:false});setLocalMsg(updated);onUpdate(updated);setConfirm(null);};// G16: high-impact changes need confirmation\nconst stageChange=(field,val)=>{const highImpact=field===\"assignedTo\"||field===\"status\"&&val===\"resolved\"||field===\"priority\"&&val===\"Urgent\";if(highImpact){var _getUserById3;const label=field===\"assignedTo\"?\"reassign to \".concat((_getUserById3=getUserById(+val))===null||_getUserById3===void 0?void 0:_getUserById3.name):field===\"status\"?\"mark as \".concat(val):\"change priority to \".concat(val);setConfirm({field,val,label});}else{applyChange(field,val);}};const addNote=()=>{if(!note.trim())return;const updated=_objectSpread(_objectSpread({},localMsg),{},{internalNotes:[...localMsg.internalNotes,{text:note,author:currentUser.name,time:new Date().toLocaleTimeString()}]});setLocalMsg(updated);onUpdate(updated);setNote(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full border-l \".concat(darkMode?\"bg-gray-800 text-white border-gray-700\":\"bg-white text-gray-900 border-gray-200\"),children:[confirm&&/*#__PURE__*/_jsx(ConfirmDialog,{title:\"Confirm Change\",message:\"You are about to \".concat(confirm.label,\". This will be recorded in the change history. Continue?\"),onConfirm:()=>applyChange(confirm.field,confirm.val),onCancel:()=>setConfirm(null),darkMode:darkMode}),onClose&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 border-b \".concat(darkMode?\"border-gray-700\":\"border-gray-200\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-sm \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"Message Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600 text-lg leading-none\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-base font-semibold mb-1 \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:localMsg.subject}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-xs flex-wrap \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"From: \",/*#__PURE__*/_jsx(\"strong\",{children:localMsg.from})]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\xB7\"}),/*#__PURE__*/_jsx(\"span\",{children:localMsg.date}),/*#__PURE__*/_jsx(\"span\",{children:\"\\xB7\"}),/*#__PURE__*/_jsxs(\"span\",{children:[getChannelIcon(localMsg.channel),\" \",localMsg.channel]})]})]}),/*#__PURE__*/_jsx(DataWarningBanner,{message:localMsg,darkMode:darkMode}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(PriorityBadge,{message:localMsg}),/*#__PURE__*/_jsx(ConfidenceBadge,{message:localMsg}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full \".concat(getStatusColor(localMsg.status)),children:localMsg.status}),localMsg.needsReview&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full border \".concat(darkMode?\"bg-amber-900/30 border-amber-700 text-amber-300\":\"bg-amber-50 border-amber-200 text-amber-700\"),children:\"\\uD83D\\uDC41 Needs Human Review\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded-lg p-3 text-sm leading-relaxed \".concat(darkMode?\"bg-gray-700/50 text-gray-200\":\"bg-gray-50 text-gray-700\"),children:localMsg.body}),isManager&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs mb-1 block \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Status\"}),/*#__PURE__*/_jsx(\"select\",{value:localMsg.status,onChange:e=>stageChange(\"status\",e.target.value),className:inputCls,children:[\"pending\",\"assigned\",\"in-process\",\"resolved\"].map(s=>/*#__PURE__*/_jsx(\"option\",{children:s},s))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs mb-1 block \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Priority\"}),/*#__PURE__*/_jsx(\"select\",{value:localMsg.priority,onChange:e=>stageChange(\"priority\",e.target.value),className:inputCls,children:[\"Urgent\",\"Medium\",\"Low\"].map(p=>/*#__PURE__*/_jsx(\"option\",{children:p},p))})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs mb-1 block \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Assign To\"}),/*#__PURE__*/_jsx(\"select\",{value:localMsg.assignedTo,onChange:e=>stageChange(\"assignedTo\",e.target.value),className:inputCls,children:USERS.filter(u=>u.role===\"Employee\").map(u=>/*#__PURE__*/_jsx(\"option\",{value:u.id,children:u.name},u.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs mb-1 block \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Department\"}),/*#__PURE__*/_jsx(\"select\",{value:localMsg.department,onChange:e=>stageChange(\"department\",e.target.value),className:inputCls,children:[\"Sales\",\"Support\",\"Marketing\",\"Hr\",\"Finance\"].map(d=>/*#__PURE__*/_jsx(\"option\",{children:d},d))})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs mb-1 block \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Contact Info\"}),/*#__PURE__*/_jsx(\"input\",{readOnly:true,value:localMsg.contactInfo,className:inputCls})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium mb-2 \".concat(darkMode?\"text-gray-300\":\"text-gray-600\"),children:\"Internal Notes\"}),localMsg.internalNotes.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs italic \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:\"No notes yet.\"}),localMsg.internalNotes.map((n,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg p-2.5 mb-2 text-xs \".concat(darkMode?\"bg-gray-700/50\":\"bg-yellow-50 border border-yellow-100\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium mb-0.5 \".concat(darkMode?\"text-gray-300\":\"text-gray-700\"),children:[n.author,\" \\xB7 \",n.time]}),/*#__PURE__*/_jsx(\"div\",{className:darkMode?\"text-gray-400\":\"text-gray-600\",children:n.text})]},i)),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-2\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:note,onChange:e=>setNote(e.target.value),rows:2,placeholder:\"Add internal note...\",className:\"flex-1 \".concat(inputCls,\" resize-none\")}),/*#__PURE__*/_jsx(\"button\",{onClick:addNote,className:\"bg-amber-500 text-white px-3 rounded-lg text-xs font-medium hover:bg-amber-600 flex-shrink-0\",children:\"Add\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowLog(s=>!s),className:\"text-xs font-medium flex items-center gap-1 mb-2 \".concat(darkMode?\"text-gray-400 hover:text-gray-300\":\"text-gray-500 hover:text-gray-700\"),children:[\"\\uD83D\\uDCCB Change History \",((_localMsg$changeLog=localMsg.changeLog)===null||_localMsg$changeLog===void 0?void 0:_localMsg$changeLog.length)>0&&\"(\".concat(localMsg.changeLog.length,\")\"),\" \",showLog?\"â–²\":\"â–¼\"]}),showLog&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[(!localMsg.changeLog||localMsg.changeLog.length===0)&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs italic \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:\"No changes recorded yet.\"}),(_localMsg$changeLog2=localMsg.changeLog)===null||_localMsg$changeLog2===void 0?void 0:_localMsg$changeLog2.map((e,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs flex items-start gap-2 py-1 border-b \".concat(darkMode?\"border-gray-700/50 text-gray-400\":\"border-gray-50 text-gray-500\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex-shrink-0\",children:\"\\uD83D\\uDCDD\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:darkMode?\"text-gray-300\":\"text-gray-600\",children:e.user}),\" changed \",/*#__PURE__*/_jsx(\"em\",{children:e.field}),\": \",/*#__PURE__*/_jsx(\"strong\",{children:e.from}),\" \\u2192 \",/*#__PURE__*/_jsx(\"strong\",{children:e.to}),\" \\xB7 \",e.time]})]},i))]})]})]})]});}function MessagesView(_ref13){let{isManager,currentUser,darkMode}=_ref13;const{messages,updateMessage}=useContext(AppContext);const[selected,setSelected]=useState(null);const[search,setSearch]=useState(\"\");const[sort,setSort]=useState(\"Most Recent\");const[showDetail,setShowDetail]=useState(false);const[dismissed,setDismissed]=useState([]);const[showCapability,setShowCapability]=useState(true);const filtered=messages.filter(m=>m.from.toLowerCase().includes(search.toLowerCase())||m.subject.toLowerCase().includes(search.toLowerCase())||m.body.toLowerCase().includes(search.toLowerCase()));const sorted=[...filtered].sort((a,b)=>{if(sort===\"Priority\"){const o={Urgent:0,Medium:1,Low:2};return o[a.priority]-o[b.priority];}if(sort===\"Needs Review\")return(b.needsReview?1:0)-(a.needsReview?1:0);return b.id-a.id;});const selectedMsg=selected?messages.find(m=>m.id===selected):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-1 overflow-hidden \".concat(darkMode?\"bg-gray-900\":\"bg-gray-50\"),children:[showCapability&&/*#__PURE__*/_jsx(CapabilityBanner,{role:currentUser.role,onDismiss:()=>setShowCapability(false),darkMode:darkMode}),isManager&&/*#__PURE__*/_jsx(UrgentAlert,{messages:messages,dismissed:dismissed,onDismiss:id=>setDismissed(d=>[...d,id]),darkMode:darkMode}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border-b flex items-center gap-2 mt-2 \".concat(darkMode?\"bg-gray-800 border-gray-700\":\"bg-white border-gray-200\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{value:search,onChange:e=>setSearch(e.target.value),placeholder:\"Search messages...\",className:\"w-full pl-9 pr-3 py-2 text-sm border rounded-lg \".concat(darkMode?\"bg-gray-700 border-gray-600 text-white placeholder-gray-400\":\"bg-gray-50 border-gray-200 text-gray-900\")})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-xs px-3 py-2 border rounded-lg \".concat(darkMode?\"border-gray-600 text-gray-300 hover:bg-gray-700\":\"border-gray-200 text-gray-600 hover:bg-gray-100\"),children:\"\\u2699 Filters\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col \".concat(showDetail?\"hidden sm:flex sm:w-80 lg:w-96\":\"flex-1 sm:w-80 lg:w-96\",\" border-r overflow-hidden \").concat(darkMode?\"border-gray-700\":\"border-gray-200\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-3 py-2 border-b \".concat(darkMode?\"bg-gray-800 border-gray-700\":\"bg-white border-gray-100\"),children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:[\"Messages \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-normal \".concat(darkMode?\"text-gray-400\":\"text-gray-400\"),children:[filtered.length,\" total\"]})]}),/*#__PURE__*/_jsxs(\"select\",{value:sort,onChange:e=>setSort(e.target.value),className:\"text-xs border rounded-lg px-2 py-1 \".concat(darkMode?\"bg-gray-700 border-gray-600 text-white\":\"bg-white border-gray-200 text-gray-700\"),children:[/*#__PURE__*/_jsx(\"option\",{children:\"Most Recent\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Needs Review\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:sorted.map(m=>/*#__PURE__*/_jsx(MessageListItem,{message:m,selected:selected===m.id,darkMode:darkMode,onClick:()=>{setSelected(m.id);setShowDetail(true);}},m.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-hidden \".concat(!showDetail?\"hidden sm:flex sm:flex-col\":\"flex flex-col\"),children:selectedMsg?/*#__PURE__*/_jsx(MessageDetail,{message:selectedMsg,isManager:isManager,currentUser:currentUser,darkMode:darkMode,onClose:()=>setShowDetail(false),onUpdate:updateMessage},selectedMsg.id):/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex items-center justify-center flex-col gap-3 \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-5xl\",children:\"\\uD83D\\uDCAC\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Select a message to view details\"})]})})]})]});}function StatCard(_ref14){let{icon,value,label,sub,subColor,darkMode}=_ref14;return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl border p-4 \".concat(darkMode?\"bg-gray-800 border-gray-700\":\"bg-white border-gray-100\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:icon}),sub&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium \".concat(subColor||\"text-gray-500\"),children:sub})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:value}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:label})]});}function MiniBar(_ref15){let{label,count,total,color,icon,darkMode}=_ref15;const pct=total?count/total*100:0;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[icon&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs w-4\",children:icon}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs w-20 flex-shrink-0 \".concat(darkMode?\"text-gray-300\":\"text-gray-600\"),children:label}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 rounded-full h-1.5 \".concat(darkMode?\"bg-gray-700\":\"bg-gray-100\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"h-1.5 rounded-full \".concat(color),style:{width:\"\".concat(pct,\"%\")}})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs w-4 text-right \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:count})]});}const AI_INSIGHTS_DATA=[{id:1,type:\"suggestion\",badge:\"AI Suggestion\",badgeColor:\"bg-amber-100 text-amber-700 border-amber-200\",time:\"Just now\",title:\"Potential Service Outage\",body:'Detected 5 similar inquiries regarding \"login issues\" in the last 30 minutes. Suggesting high priority for task T-1021.',actionable:true,applied:false},{id:2,type:\"digest\",badge:\"AI Digest\",badgeColor:\"bg-gray-100 text-gray-600 border-gray-200\",time:\"1h ago\",title:\"Daily Communication Summary\",body:\"Total 42 incoming communications. Top concerns: Billing (45%), Technical (30%), General (25%).\",actionable:false,applied:false},{id:3,type:\"suggestion\",badge:\"AI Suggestion\",badgeColor:\"bg-amber-100 text-amber-700 border-amber-200\",time:\"2h ago\",title:\"Recurring Billing Complaint\",body:'Invoice discrepancy pattern detected â€” 3 contacts reported mismatched amounts in the past 24 hours. Consider escalating to Finance lead.',actionable:true,applied:false},{id:4,type:\"trend\",badge:\"AI Trend\",badgeColor:\"bg-blue-100 text-blue-600 border-blue-200\",time:\"3h ago\",title:\"Support Volume Spike\",body:\"Support channel volume is 40% above the 7-day average. Password reset requests account for most of the increase.\",actionable:false,applied:false},{id:5,type:\"suggestion\",badge:\"AI Suggestion\",badgeColor:\"bg-amber-100 text-amber-700 border-amber-200\",time:\"Yesterday\",title:\"Auto-Route Partnership Inquiries\",body:\"3 recent social media partnership messages were manually rerouted from Support to Marketing. Suggesting a new routing rule for messages containing 'partnership' or 'affiliate'.\",actionable:true,applied:false}];// Trend chart using SVG\nfunction TrendChart(_ref16){let{data,darkMode,color=\"#16a34a\"}=_ref16;const w=600,h=160,pad=20;const max=Math.max(...data.map(d=>d.value),1);const min=Math.min(...data.map(d=>d.value),0);const range=max-min||1;const points=data.map((d,i)=>{const x=pad+i/(data.length-1)*(w-pad*2);const y=h-pad-(d.value-min)/range*(h-pad*2);return{x,y,label:d.label};});const pathD=points.map((p,i)=>\"\".concat(i===0?\"M\":\"L\").concat(p.x,\",\").concat(p.y)).join(\" \");const areaD=pathD+\" L\".concat(points[points.length-1].x,\",\").concat(h-pad,\" L\").concat(points[0].x,\",\").concat(h-pad,\" Z\");return/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 \".concat(w,\" \").concat(h+20),className:\"w-full\",style:{maxHeight:220},children:[/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"trendFill\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",stopColor:color,stopOpacity:\"0.15\"}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",stopColor:color,stopOpacity:\"0.01\"})]})}),/*#__PURE__*/_jsx(\"path\",{d:areaD,fill:\"url(#trendFill)\"}),/*#__PURE__*/_jsx(\"path\",{d:pathD,fill:\"none\",stroke:color,strokeWidth:\"2.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),points.map((p,i)=>/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"circle\",{cx:p.x,cy:p.y,r:\"4\",fill:color}),/*#__PURE__*/_jsx(\"circle\",{cx:p.x,cy:p.y,r:\"2\",fill:\"white\"}),/*#__PURE__*/_jsx(\"text\",{x:p.x,y:h+12,textAnchor:\"middle\",className:\"text-xs \".concat(darkMode?\"fill-gray-400\":\"fill-gray-500\"),style:{fontSize:11},children:p.label})]},i))]});}function AIPerformanceInsights(_ref17){let{darkMode,scopeMessages,allMessages,currentUser}=_ref17;const[expanded,setExpanded]=useState(true);const[trendMetric,setTrendMetric]=useState(\"Volume\");const[chartType,setChartType]=useState(\"line\");const msgs=scopeMessages;const total=msgs.length;const resolved=msgs.filter(m=>m.status===\"resolved\").length;const urgent=msgs.filter(m=>m.priority===\"Urgent\").length;const lowConf=msgs.filter(m=>m.confidence===\"Low Confidence\").length;const resolutionRate=total>0?Math.round(resolved/total*100):0;const urgentRatio=total>0?Math.round(urgent/total*100):0;const confOverrides=total>0?Math.round(lowConf/total*100):0;const escalationRate=total>0?Math.round(urgent/total*100*0.55):0;// Pattern detection\nconst patterns=[];if(escalationRate>15)patterns.push({icon:\"âš¡\",label:\"Escalation Frequency Above Average\",color:\"text-red-600 bg-red-50 border-red-200\"});if(lowConf>0)patterns.push({icon:\"âš ï¸\",label:\"Low Confidence Classifications Detected\",color:\"text-amber-600 bg-amber-50 border-amber-200\"});if(urgentRatio>25)patterns.push({icon:\"ðŸ”¥\",label:\"High Urgent Message Ratio\",color:\"text-orange-600 bg-orange-50 border-orange-200\"});const pendingCount=msgs.filter(m=>m.status===\"pending\").length;if(pendingCount>2)patterns.push({icon:\"ðŸ“¥\",label:\"Pending Queue Growing\",color:\"text-blue-600 bg-blue-50 border-blue-200\"});// Trend data (simulated weekly)\nconst trendData={Volume:[{label:\"Mon\",value:8},{label:\"Tue\",value:12},{label:\"Wed\",value:6},{label:\"Thu\",value:15},{label:\"Fri\",value:11},{label:\"Sat\",value:4},{label:\"Sun\",value:3}],Response:[{label:\"Mon\",value:120},{label:\"Tue\",value:148},{label:\"Wed\",value:95},{label:\"Thu\",value:160},{label:\"Fri\",value:135},{label:\"Sat\",value:80},{label:\"Sun\",value:70}],Priority:[{label:\"Mon\",value:3},{label:\"Tue\",value:5},{label:\"Wed\",value:2},{label:\"Thu\",value:6},{label:\"Fri\",value:4},{label:\"Sat\",value:1},{label:\"Sun\",value:2}]};const trendColors={Volume:\"#16a34a\",Response:\"#2563eb\",Priority:\"#dc2626\"};const card=\"rounded-xl border \".concat(darkMode?\"bg-gray-800 border-gray-700\":\"bg-white border-gray-100\");const metricCard=\"rounded-lg border p-3 \".concat(darkMode?\"bg-gray-700/50 border-gray-600\":\"bg-white border-gray-200\");// AI Analysis sentence\nconst analysisText=currentUser.role===\"Employee\"?\"You've handled \".concat(total,\" message\").concat(total!==1?\"s\":\"\",\" in the past 30 days, with a \").concat(resolutionRate,\"% resolution rate. \").concat(resolutionRate>=70?\"Your response time is on par with team average.\":resolutionRate>=50?\"There's room to improve your resolution rate.\":\"Consider prioritising pending items to improve throughput.\"):\"Your team has processed \".concat(allMessages.length,\" messages in the past 30 days, with a \").concat(resolutionRate,\"% resolution rate and \").concat(urgentRatio,\"% urgent ratio. \").concat(resolutionRate>=70?\"Team performance is strong.\":\"Resolution rate could be improved with better routing.\");return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(card,\" p-4 mb-4\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-1 cursor-pointer\",onClick:()=>setExpanded(e=>!e),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"AI Performance Insights\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:expanded?\"â–²\":\"â–¼\"})]}),expanded&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u2728\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"AI Performance Insights\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mb-4 italic \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Insights are generated based on historical activity and trends.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:metricCard,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mb-1 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Avg Response Time\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"148m\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-500 flex items-center gap-0.5\",children:\"\\u2198 12%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:metricCard,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mb-1 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Resolution Rate\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:[resolutionRate,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-500 flex items-center gap-0.5\",children:\"\\u2198 8%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:metricCard,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mb-1 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Escalation Rate\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:[escalationRate,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-500 flex items-center gap-0.5\",children:\"\\u2198 3%\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:metricCard,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mb-1 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Messages (30d)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:total}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-green-500 flex items-center gap-0.5\",children:\"\\u2197 15%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:metricCard,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mb-1 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Urgent Ratio\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:[urgentRatio,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-500 flex items-center gap-0.5\",children:\"\\u2198 5%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:metricCard,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mb-1 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Confidence Overrides\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:[confOverrides,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-500 flex items-center gap-0.5\",children:\"\\u2198 2%\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg p-3 mb-4 flex items-start gap-3 \".concat(darkMode?\"bg-blue-900/20 border border-blue-800/40\":\"bg-blue-50 border border-blue-200\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg flex-shrink-0 mt-0.5\",children:\"\\u2728\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold mb-0.5 \".concat(darkMode?\"text-blue-300\":\"text-blue-800\"),children:\"AI Analysis\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs leading-relaxed \".concat(darkMode?\"text-blue-200\":\"text-blue-700\"),children:analysisText})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-semibold mb-2 \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"Pattern Detection\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:patterns.length>0?patterns.map((p,i)=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-full border font-medium \".concat(darkMode?\"bg-gray-700 border-gray-600 text-gray-300\":p.color),children:[p.icon,\" \",p.label]},i)):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs italic \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:\"No unusual patterns detected.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg px-3 py-2 mb-4 text-xs \".concat(darkMode?\"bg-amber-900/20 border border-amber-800/40 text-amber-300\":\"bg-amber-50 border border-amber-200 text-amber-800\"),children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Human-in-the-Loop:\"}),\" AI insights are advisory and based on historical patterns. Final decisions remain with the user.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border p-4 \".concat(darkMode?\"bg-gray-700/30 border-gray-600\":\"bg-white border-gray-200\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"Trend Analysis\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[[\"Volume\",\"Response\",\"Priority\"].map(m=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTrendMetric(m),className:\"text-xs px-2.5 py-1 rounded-lg font-medium transition-colors \".concat(trendMetric===m?darkMode?\"bg-gray-600 text-white\":\"bg-gray-200 text-gray-800\":darkMode?\"text-gray-400 hover:bg-gray-600\":\"text-gray-500 hover:bg-gray-100\"),children:m},m)),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-0.5 ml-1 border rounded-lg overflow-hidden \".concat(darkMode?\"border-gray-600\":\"border-gray-200\"),children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setChartType(\"bar\"),className:\"p-1.5 text-xs \".concat(chartType===\"bar\"?darkMode?\"bg-gray-600 text-white\":\"bg-gray-200 text-gray-700\":darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"\\u25A5\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setChartType(\"line\"),className:\"p-1.5 text-xs \".concat(chartType===\"line\"?darkMode?\"bg-gray-600 text-white\":\"bg-gray-200 text-gray-700\":darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"\\u2197\"})]})]})]}),chartType===\"line\"?/*#__PURE__*/_jsx(TrendChart,{data:trendData[trendMetric],darkMode:darkMode,color:trendColors[trendMetric]}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end gap-2 h-40 px-2\",children:trendData[trendMetric].map((d,i)=>{const maxVal=Math.max(...trendData[trendMetric].map(x=>x.value),1);const pct=d.value/maxVal*100;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col items-center gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex items-end justify-center\",style:{height:120},children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full max-w-8 rounded-t-md transition-all\",style:{height:\"\".concat(pct,\"%\"),backgroundColor:trendColors[trendMetric],opacity:0.7}})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),style:{fontSize:10},children:d.label})]},i);})})]})]})]});}function RecentTasksTable(_ref18){let{taskMessages,darkMode,onViewAll}=_ref18;const recent=[...taskMessages].sort((a,b)=>b.id-a.id).slice(0,5);const thCls=\"text-left pb-2 font-medium text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\");const tdCls=\"py-2.5 text-xs \".concat(darkMode?\"text-gray-300\":\"text-gray-600\");return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl border p-4 \".concat(darkMode?\"bg-gray-800 border-gray-700\":\"bg-white border-gray-100\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"Recent Tasks\"}),onViewAll&&/*#__PURE__*/_jsx(\"button\",{onClick:onViewAll,className:\"text-xs text-amber-600 hover:text-amber-700 font-medium flex items-center gap-1\",children:\"View All \\u2197\"})]}),recent.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"No recent tasks found.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b \".concat(darkMode?\"border-gray-700\":\"border-gray-100\"),children:[/*#__PURE__*/_jsx(\"th\",{className:thCls,children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{className:thCls,children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{className:\"\".concat(thCls,\" hidden sm:table-cell\"),children:\"Channel\"}),/*#__PURE__*/_jsx(\"th\",{className:thCls,children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{className:thCls,children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"\".concat(thCls,\" hidden sm:table-cell\"),children:\"Owner\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:recent.map(m=>{const owner=getUserById(m.assignedTo);return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b \".concat(darkMode?\"border-gray-700/50\":\"border-gray-50\"),children:[/*#__PURE__*/_jsxs(\"td\",{className:\"\".concat(tdCls,\" font-mono\"),children:[\"T-\",String(1000+m.id)]}),/*#__PURE__*/_jsx(\"td\",{className:tdCls,children:/*#__PURE__*/_jsx(\"div\",{className:\"font-medium truncate max-w-48 \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:m.subject})}),/*#__PURE__*/_jsx(\"td\",{className:\"\".concat(tdCls,\" hidden sm:table-cell\"),children:/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full \".concat(darkMode?\"bg-gray-700 text-gray-300\":\"bg-gray-100 text-gray-600\"),children:[getChannelIcon(m.channel),\" \",m.channel]})}),/*#__PURE__*/_jsx(\"td\",{className:tdCls,children:/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full border \".concat(getPriorityColor(m.priority)),children:[getPriorityIcon(m.priority),\" \",m.priority]})}),/*#__PURE__*/_jsx(\"td\",{className:tdCls,children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full capitalize \".concat(getStatusColor(m.status)),children:m.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"\".concat(tdCls,\" hidden sm:table-cell\"),children:owner?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(Avatar,{name:owner.name,size:\"sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate max-w-20 \".concat(darkMode?\"text-gray-300\":\"text-gray-700\"),children:owner.name.split(\" \")[0]})]}):/*#__PURE__*/_jsx(\"span\",{className:darkMode?\"text-gray-500\":\"text-gray-400\",children:\"Unassigned\"})})]},m.id);})})]})})]});}function AIInsightsPanel(_ref19){let{darkMode,messages}=_ref19;const[insights,setInsights]=useState(AI_INSIGHTS_DATA);const[dismissed,setDismissed]=useState([]);const handleApply=id=>{setInsights(prev=>prev.map(i=>i.id===id?_objectSpread(_objectSpread({},i),{},{applied:true}):i));};const handleDismiss=id=>{setDismissed(prev=>[...prev,id]);};const visible=insights.filter(i=>!dismissed.includes(i.id));// Derive a live pattern detection from actual messages\nconst urgentPending=messages.filter(m=>m.priority===\"Urgent\"&&m.status===\"pending\").length;const lowConfCount=messages.filter(m=>m.confidence===\"Low Confidence\").length;return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl border p-4 \".concat(darkMode?\"bg-gray-800 border-gray-700\":\"bg-amber-50/50 border-amber-100\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\uD83E\\uDDE0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"AI Insights\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full \".concat(darkMode?\"bg-amber-900/40 text-amber-300\":\"bg-amber-100 text-amber-700\"),children:[visible.length,\" active\"]})]})}),urgentPending>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border p-3 mb-3 \".concat(darkMode?\"bg-red-900/20 border-red-800/40\":\"bg-red-50 border-red-200\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full border font-medium \".concat(darkMode?\"bg-red-900/40 text-red-300 border-red-700\":\"bg-red-100 text-red-700 border-red-200\"),children:\"\\uD83D\\uDEA8 Live Alert\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:\"Now\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium mb-0.5 \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"Urgent Messages Unassigned\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs leading-relaxed \".concat(darkMode?\"text-gray-400\":\"text-gray-600\"),children:[urgentPending,\" urgent message\",urgentPending>1?\"s are\":\" is\",\" still pending without action. Immediate attention recommended.\"]})]}),lowConfCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border p-3 mb-3 \".concat(darkMode?\"bg-amber-900/20 border-amber-800/40\":\"bg-amber-50 border-amber-200\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full border font-medium \".concat(darkMode?\"bg-amber-900/40 text-amber-300 border-amber-700\":\"bg-amber-100 text-amber-700 border-amber-200\"),children:\"\\u26A0\\uFE0F Review Needed\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:\"Ongoing\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium mb-0.5 \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"Low Confidence Classifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs leading-relaxed \".concat(darkMode?\"text-gray-400\":\"text-gray-600\"),children:[lowConfCount,\" message\",lowConfCount>1?\"s have\":\" has\",\" low AI confidence. Human review is recommended to ensure correct routing.\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:visible.map(insight=>/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border p-3 transition-all \".concat(insight.applied?darkMode?\"bg-green-900/10 border-green-800/30\":\"bg-green-50/50 border-green-200\":darkMode?\"bg-gray-700/50 border-gray-600\":\"bg-white border-gray-200\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full border font-medium \".concat(insight.applied?darkMode?\"bg-green-900/40 text-green-300 border-green-700\":\"bg-green-100 text-green-700 border-green-200\":insight.badgeColor),children:insight.badge}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:insight.time}),insight.applied&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium \".concat(darkMode?\"text-green-400\":\"text-green-600\"),children:\"\\u2713 Applied\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium mb-0.5 \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:insight.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs leading-relaxed mb-2 \".concat(darkMode?\"text-gray-400\":\"text-gray-600\"),children:insight.body}),!insight.applied&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[insight.actionable&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleApply(insight.id),className:\"bg-amber-500 text-white text-xs px-3 py-1.5 rounded-lg font-medium hover:bg-amber-600 transition-colors\",children:\"Apply\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDismiss(insight.id),className:\"text-xs px-3 py-1.5 rounded-lg font-medium transition-colors \".concat(darkMode?\"text-gray-400 hover:bg-gray-600\":\"text-gray-500 hover:bg-gray-100\"),children:\"Dismiss\"})]})]},insight.id))}),visible.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-6 \".concat(darkMode?\"text-gray-500\":\"text-gray-400\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl block mb-2\",children:\"\\u2728\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"All caught up! No pending AI insights.\"})]})]});}function ManagerDashboard(_ref20){let{currentUser,onUpload,darkMode}=_ref20;const{messages}=useContext(AppContext);const total=messages.length;const urgent=messages.filter(m=>m.priority===\"Urgent\").length;const resolved=messages.filter(m=>m.status===\"resolved\").length;const needsReview=messages.filter(m=>m.needsReview).length;const byPriority={Urgent:urgent,Medium:messages.filter(m=>m.priority===\"Medium\").length,Low:messages.filter(m=>m.priority===\"Low\").length};const byDept={};messages.forEach(m=>{byDept[m.department]=(byDept[m.department]||0)+1;});const byChannel={};messages.forEach(m=>{byChannel[m.channel]=(byChannel[m.channel]||0)+1;});const byConf={\"High Confidence\":0,\"Medium Confidence\":0,\"Low Confidence\":0};messages.forEach(m=>{byConf[m.confidence]++;});const statusCounts={pending:0,assigned:0,\"in-process\":0,resolved:0};messages.forEach(m=>{statusCounts[m.status]++;});const workload={};messages.forEach(m=>{if(m.assignedTo)workload[m.assignedTo]=(workload[m.assignedTo]||0)+1;});const card=\"rounded-xl border p-4 \".concat(darkMode?\"bg-gray-800 border-gray-700\":\"bg-white border-gray-100\");const sT=\"text-sm font-semibold mb-3 \".concat(darkMode?\"text-white\":\"text-gray-800\");return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-4 \".concat(darkMode?\"bg-gray-900\":\"bg-gray-50\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-lg font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:[currentUser.role===\"Admin\"?\"Admin\":currentUser.role===\"Manager\"?\"Manager\":\"Team\",\" Dashboard\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Overview of team performance and message analytics\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onUpload,className:\"bg-amber-500 text-white text-xs px-4 py-2 rounded-lg hover:bg-amber-600 font-medium\",children:\"+ Upload Message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-4\",children:[/*#__PURE__*/_jsx(StatCard,{icon:\"\\uD83D\\uDCCA\",value:total,label:\"Total Messages\",sub:\"+12%\",subColor:\"text-green-500\",darkMode:darkMode}),/*#__PURE__*/_jsx(StatCard,{icon:\"\\u26A0\\uFE0F\",value:messages.filter(m=>m.status===\"pending\"||m.status===\"assigned\").length,label:\"Needs Attention\",sub:\"\".concat(urgent,\" urgent\"),subColor:\"text-red-500\",darkMode:darkMode}),/*#__PURE__*/_jsx(StatCard,{icon:\"\\u2705\",value:resolved,label:\"Resolved Today\",sub:\"16.7%\",subColor:\"text-green-500\",darkMode:darkMode}),/*#__PURE__*/_jsx(StatCard,{icon:\"\\uD83D\\uDC41\",value:needsReview,label:\"Needs Review\",sub:\"Low confidence\",subColor:\"text-amber-500\",darkMode:darkMode})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsx(RecentTasksTable,{taskMessages:messages,darkMode:darkMode}),/*#__PURE__*/_jsx(AIInsightsPanel,{darkMode:darkMode,messages:messages})]}),/*#__PURE__*/_jsx(AIPerformanceInsights,{darkMode:darkMode,scopeMessages:messages,allMessages:messages,currentUser:currentUser}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:card,children:[/*#__PURE__*/_jsx(\"div\",{className:sT,children:\"\\u26A0\\uFE0F Messages by Priority\"}),/*#__PURE__*/_jsx(MiniBar,{label:\"Urgent\",count:byPriority.Urgent,total:total,color:\"bg-red-500\",icon:\"\\uD83D\\uDD34\",darkMode:darkMode}),/*#__PURE__*/_jsx(MiniBar,{label:\"Medium\",count:byPriority.Medium,total:total,color:\"bg-amber-500\",icon:\"\\uD83D\\uDFE1\",darkMode:darkMode}),/*#__PURE__*/_jsx(MiniBar,{label:\"Low\",count:byPriority.Low,total:total,color:\"bg-green-500\",icon:\"\\uD83D\\uDFE2\",darkMode:darkMode})]}),/*#__PURE__*/_jsxs(\"div\",{className:card,children:[/*#__PURE__*/_jsx(\"div\",{className:sT,children:\"\\uD83D\\uDCC8 Messages by Department\"}),Object.entries(byDept).map((_ref21,i)=>{let[d,c]=_ref21;return/*#__PURE__*/_jsx(MiniBar,{label:d,count:c,total:total,color:[\"bg-blue-500\",\"bg-orange-500\",\"bg-pink-500\",\"bg-purple-500\",\"bg-green-500\"][i%5],darkMode:darkMode},d);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:card,children:[/*#__PURE__*/_jsx(\"div\",{className:sT,children:\"\\u2139\\uFE0F Messages by Confidence\"}),/*#__PURE__*/_jsx(MiniBar,{label:\"High\",count:byConf[\"High Confidence\"],total:total,color:\"bg-green-500\",darkMode:darkMode}),/*#__PURE__*/_jsx(MiniBar,{label:\"Medium\",count:byConf[\"Medium Confidence\"],total:total,color:\"bg-amber-500\",darkMode:darkMode}),/*#__PURE__*/_jsx(MiniBar,{label:\"Low\",count:byConf[\"Low Confidence\"],total:total,color:\"bg-red-500\",darkMode:darkMode})]}),/*#__PURE__*/_jsxs(\"div\",{className:card,children:[/*#__PURE__*/_jsx(\"div\",{className:sT,children:\"\\uD83D\\uDCE1 Messages by Channel\"}),Object.entries(byChannel).map((_ref22,i)=>{let[c,n]=_ref22;return/*#__PURE__*/_jsx(MiniBar,{label:c,count:n,total:total,color:[\"bg-blue-500\",\"bg-green-500\",\"bg-purple-500\",\"bg-amber-500\",\"bg-red-500\"][i%5],darkMode:darkMode},c);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:card,children:[/*#__PURE__*/_jsx(\"div\",{className:sT,children:\"Status Breakdown\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:Object.entries(statusCounts).map(_ref23=>{let[s,c]=_ref23;return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg p-3 \".concat(getStatusColor(s),\" bg-opacity-20\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold\",children:c}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs capitalize\",children:s})]},s);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:card,children:[/*#__PURE__*/_jsx(\"div\",{className:sT,children:\"\\uD83D\\uDC65 Team Workload\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:USERS.filter(u=>u.role!==\"Admin\").map(u=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Avatar,{name:u.name,size:\"sm\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium \".concat(darkMode?\"text-white\":\"text-gray-800\"),children:u.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:u.department})]}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto text-xs font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:workload[u.id]||0})]},u.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:card,children:[/*#__PURE__*/_jsx(\"div\",{className:sT,children:\"Team Directory\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b \".concat(darkMode?\"border-gray-700 text-gray-400\":\"border-gray-100 text-gray-500\"),children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left pb-2 font-medium\",children:\"Employee\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left pb-2 font-medium\",children:\"Department\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left pb-2 font-medium\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left pb-2 font-medium\",children:\"Messages\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left pb-2 font-medium\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:USERS.map(u=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b \".concat(darkMode?\"border-gray-700/50\":\"border-gray-50\"),children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Avatar,{name:u.name,size:\"sm\"}),/*#__PURE__*/_jsx(\"span\",{className:darkMode?\"text-white\":\"text-gray-800\",children:u.name})]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 \".concat(darkMode?\"text-gray-300\":\"text-gray-600\"),children:u.department}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2\",children:u.role===\"Manager\"?/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded border border-purple-300 text-purple-600\",children:\"Manager\"}):u.role===\"Admin\"?/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded border border-red-300 text-red-600\",children:\"Admin\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Employee\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 \".concat(darkMode?\"text-gray-300\":\"text-gray-600\"),children:workload[u.id]||0}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1 text-green-600 text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-1.5 h-1.5 bg-green-500 rounded-full\"}),\"Active\"]})})]},u.id))})]})})]})]})});}function EmployeeDashboard(_ref24){let{currentUser,darkMode}=_ref24;const{messages}=useContext(AppContext);const myMsgs=messages.filter(m=>m.assignedTo===currentUser.id);const stats=[{icon:\"ðŸ“¬\",value:myMsgs.length,label:\"My Messages\"},{icon:\"â³\",value:myMsgs.filter(m=>m.status===\"pending\").length,label:\"Pending\"},{icon:\"ðŸ”„\",value:myMsgs.filter(m=>m.status===\"in-process\").length,label:\"In Process\"},{icon:\"âœ…\",value:myMsgs.filter(m=>m.status===\"resolved\").length,label:\"Resolved\"}];return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-4 \".concat(darkMode?\"bg-gray-900\":\"bg-gray-50\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold mb-1 \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"My Work Queue\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs mb-4 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:[\"Messages assigned to \",currentUser.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-4\",children:stats.map(s=>/*#__PURE__*/_jsx(StatCard,{icon:s.icon,value:s.value,label:s.label,darkMode:darkMode},s.label))}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsx(RecentTasksTable,{taskMessages:myMsgs,darkMode:darkMode}),/*#__PURE__*/_jsx(AIInsightsPanel,{darkMode:darkMode,messages:myMsgs})]}),/*#__PURE__*/_jsx(AIPerformanceInsights,{darkMode:darkMode,scopeMessages:myMsgs,allMessages:messages,currentUser:currentUser}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded-xl border \".concat(darkMode?\"bg-gray-800 border-gray-700\":\"bg-white border-gray-100\"),children:myMsgs.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center text-gray-400\",children:\"No messages assigned to you.\"}):myMsgs.map((m,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"p-3 \".concat(i<myMsgs.length-1?\"border-b \".concat(darkMode?\"border-gray-700\":\"border-gray-50\"):\"\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-base mt-0.5\",children:getChannelIcon(m.channel)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:m.from}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-400\"),children:m.date})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium mb-1 \".concat(darkMode?\"text-gray-300\":\"text-gray-700\"),children:m.subject}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mb-2 line-clamp-2 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:m.body}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(PriorityBadge,{message:m}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full \".concat(getStatusColor(m.status)),children:m.status}),/*#__PURE__*/_jsx(ConfidenceBadge,{message:m})]})]})]})},m.id))})]})});}function UploadModal(_ref25){let{onClose,onSubmit,currentUser,darkMode}=_ref25;const[form,setForm]=useState({channel:\"Email\",priority:\"Medium\",department:\"Sales\",assignedTo:1,contactName:\"\",contactInfo:\"\",confidence:\"High Confidence\",subject:\"\",body:\"\"});const h=(k,v)=>setForm(f=>_objectSpread(_objectSpread({},f),{},{[k]:v}));const inputCls=\"w-full border rounded-lg px-3 py-2 text-sm \".concat(darkMode?\"bg-gray-700 border-gray-600 text-white\":\"bg-white border-gray-200 text-gray-900\");const modal=\"rounded-xl shadow-2xl w-full max-w-lg mx-4 \".concat(darkMode?\"bg-gray-800 text-white\":\"bg-white text-gray-900\");const assignee=getUserById(form.assignedTo);return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:modal,onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-5 border-b \".concat(darkMode?\"border-gray-700\":\"border-gray-200\"),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold\",children:\"Upload Message\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 space-y-3 max-h-[70vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Channel\"}),/*#__PURE__*/_jsx(\"select\",{value:form.channel,onChange:e=>h(\"channel\",e.target.value),className:inputCls,children:[\"Email\",\"Phone\",\"Chat\",\"Social\",\"SMS\"].map(c=>/*#__PURE__*/_jsx(\"option\",{children:c},c))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Priority\"}),/*#__PURE__*/_jsx(\"select\",{value:form.priority,onChange:e=>h(\"priority\",e.target.value),className:inputCls,children:[\"Urgent\",\"Medium\",\"Low\"].map(p=>/*#__PURE__*/_jsx(\"option\",{children:p},p))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Department\"}),/*#__PURE__*/_jsx(\"select\",{value:form.department,onChange:e=>h(\"department\",e.target.value),className:inputCls,children:[\"Sales\",\"Support\",\"Marketing\",\"Hr\",\"Finance\"].map(d=>/*#__PURE__*/_jsx(\"option\",{children:d},d))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Assign To\"}),/*#__PURE__*/_jsx(\"select\",{value:form.assignedTo,onChange:e=>h(\"assignedTo\",+e.target.value),className:inputCls,children:USERS.filter(u=>u.role===\"Employee\").map(u=>/*#__PURE__*/_jsx(\"option\",{value:u.id,children:u.name},u.id))})]})]}),assignee&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs p-2.5 rounded-lg flex items-start gap-2 \".concat(darkMode?\"bg-blue-900/20 border border-blue-700/40 text-blue-300\":\"bg-blue-50 border border-blue-200 text-blue-700\"),children:[\"\\u2139\\uFE0F This message will be sent to \",/*#__PURE__*/_jsx(\"strong\",{children:assignee.name}),\" (\",assignee.department,\") with \",/*#__PURE__*/_jsx(\"strong\",{children:form.priority}),\" priority.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Contact Name\"}),/*#__PURE__*/_jsx(\"input\",{value:form.contactName,onChange:e=>h(\"contactName\",e.target.value),className:inputCls})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Contact Info\"}),/*#__PURE__*/_jsx(\"input\",{value:form.contactInfo,onChange:e=>h(\"contactInfo\",e.target.value),placeholder:\"Email, phone, or handle\",className:inputCls})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Confidence Level\"}),/*#__PURE__*/_jsx(\"select\",{value:form.confidence,onChange:e=>h(\"confidence\",e.target.value),className:inputCls,children:[\"High Confidence\",\"Medium Confidence\",\"Low Confidence\"].map(c=>/*#__PURE__*/_jsx(\"option\",{children:c},c))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{value:form.subject,onChange:e=>h(\"subject\",e.target.value),className:inputCls})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Message Content\"}),/*#__PURE__*/_jsx(\"textarea\",{value:form.body,onChange:e=>h(\"body\",e.target.value),rows:3,className:\"\".concat(inputCls,\" resize-none\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 p-5 pt-0\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"flex-1 border rounded-lg py-2 text-sm \".concat(darkMode?\"border-gray-600 text-gray-300\":\"border-gray-200 text-gray-600\"),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{onSubmit(form);onClose();},className:\"flex-1 bg-amber-500 text-white text-sm py-2 rounded-lg font-medium hover:bg-amber-600\",children:\"Upload Message\"})]})]})});}const INITIAL_INTEGRATIONS={email:{connected:false,inboxes:[{id:1,address:\"support@company.com\",department:\"Support\",owner:\"Lisa\",priority:\"Medium\",status:\"Active\"}]},instagram:{connected:false,handle:\"\"},shopify:{connected:false,store:\"\"},telephony:{connected:false,number:\"\"}};function IntegrationsScreen(_ref26){let{darkMode}=_ref26;const[integrations,setIntegrations]=useState(INITIAL_INTEGRATIONS);const[connectModal,setConnectModal]=useState(null);const[showAddInbox,setShowAddInbox]=useState(false);const[expandedDetails,setExpandedDetails]=useState({});const connectedCount=Object.values(integrations).filter(v=>v.connected).length;const handleConnect=(type,val)=>setIntegrations(p=>_objectSpread(_objectSpread({},p),{},{[type]:_objectSpread(_objectSpread({},p[type]),{},{connected:true,handle:val,store:val,number:val})}));const handleDisconnect=type=>setIntegrations(p=>_objectSpread(_objectSpread({},p),{},{[type]:_objectSpread(_objectSpread({},p[type]),{},{connected:false})}));const handleAddInbox=form=>setIntegrations(p=>_objectSpread(_objectSpread({},p),{},{email:_objectSpread(_objectSpread({},p.email),{},{inboxes:[...p.email.inboxes,_objectSpread(_objectSpread({id:Date.now()},form),{},{status:\"Active\"})]})}));const handleDeleteInbox=id=>setIntegrations(p=>_objectSpread(_objectSpread({},p),{},{email:_objectSpread(_objectSpread({},p.email),{},{inboxes:p.email.inboxes.filter(i=>i.id!==id)})}));const card=\"rounded-xl border \".concat(darkMode?\"bg-gray-800 border-gray-700\":\"bg-white border-gray-200\");const CONFIGS=[{type:\"email\",icon:\"âœ‰ï¸\",name:\"Email\",badge:\"Gmail / Outlook\",desc:\"Inbound email forwarding via Google Workspace\",details:{webhook:\"POST /api/ingest/email\",auth:\"OAuth 2.0 / SMTP\",events:[\"New email received\",\"Reply detected\",\"Bounce notification\"]}},{type:\"instagram\",icon:\"ðŸ“¸\",name:\"Instagram (Meta)\",badge:\"Meta Business API\",desc:\"Direct messages and sales notifications\",details:{webhook:\"POST /api/ingest/instagram\",auth:\"Meta App Token\",events:[\"New DM received\",\"Story mention\",\"Comment on post\"]}},{type:\"shopify\",icon:\"ðŸ›ï¸\",name:\"Shopify\",badge:\"Shopify Webhooks\",desc:\"Order and event notifications\",details:{webhook:\"POST /api/ingest/shopify\",auth:\"Shopify API Key\",events:[\"Order created\",\"Order fulfilled\",\"Refund requested\"]}},{type:\"telephony\",icon:\"ðŸ“ž\",name:\"Telephony\",badge:\"Twilio / Flute\",desc:\"Call transcription and routing\",details:{webhook:\"POST /api/ingest/telephony\",auth:\"Twilio Auth Token\",events:[\"Call received\",\"Voicemail left\",\"Transcript ready\"]}}];return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-4 \".concat(darkMode?\"bg-gray-900\":\"bg-gray-50\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold mb-0.5 \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:\"Integrations\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mb-4 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"One integration surface powering all communication channels\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded-xl bg-amber-500 p-4 mb-4 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-sm mb-1\",children:\"Universal Ingestion Architecture\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-amber-100 mb-3\",children:[\"All channels send normalised events to: \",/*#__PURE__*/_jsx(\"code\",{className:\"bg-amber-700/50 text-amber-100 text-xs px-2 py-0.5 rounded font-mono\",children:\"POST /api/ingest\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-x-6 gap-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-amber-200 mb-1\",children:\"What happens:\"}),[\"Store raw payload\",\"Create Draft task\",\"Run AI extraction\",\"Generate suggestions\"].map(s=>/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-amber-100\",children:[\"\\u2022 \",s]},s))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-amber-200 mb-1\",children:\"Human governance:\"}),[\"Review AI suggestions\",\"Edit or confirm routing\",\"Apply changes manually\",\"Full audit trail\"].map(s=>/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-amber-100\",children:[\"\\u2022 \",s]},s))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4 flex-shrink-0 rounded-lg px-4 py-3 text-center \".concat(darkMode?\"bg-gray-800\":\"bg-white\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:[connectedCount,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-normal \".concat(darkMode?\"text-gray-400\":\"text-gray-400\"),children:\"/ 4\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:\"Connected Channels\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4\",children:CONFIGS.map(_ref27=>{var _integrations$type;let{type,icon,name,badge,desc,details}=_ref27;const isConnected=(_integrations$type=integrations[type])===null||_integrations$type===void 0?void 0:_integrations$type.connected;return/*#__PURE__*/_jsxs(\"div\",{className:card,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-9 h-9 rounded-lg flex items-center justify-center text-lg \".concat(darkMode?\"bg-gray-700\":\"bg-gray-50 border border-gray-100\"),children:icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-semibold \".concat(darkMode?\"text-white\":\"text-gray-900\"),children:name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full \".concat(darkMode?\"bg-gray-700 text-gray-400\":\"bg-gray-100 text-gray-500\"),children:badge})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 rounded-full \".concat(isConnected?\"bg-green-500\":\"bg-gray-300\")}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(isConnected?\"text-green-600\":darkMode?\"text-gray-400\":\"text-gray-400\"),children:isConnected?\"Connected\":\"Not Connected\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mb-3 \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:desc}),isConnected?/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDisconnect(type),className:\"w-full text-xs py-2 rounded-lg border font-medium \".concat(darkMode?\"border-gray-600 text-gray-300 hover:bg-gray-700\":\"border-gray-200 text-gray-600 hover:bg-gray-50\"),children:\"Disconnect\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>type===\"email\"?setIntegrations(p=>_objectSpread(_objectSpread({},p),{},{email:_objectSpread(_objectSpread({},p.email),{},{connected:true})})):setConnectModal(type),className:\"w-full bg-amber-500 text-white text-xs py-2 rounded-lg font-medium hover:bg-amber-600\",children:\"\\uD83D\\uDD17 Connect\"})]}),type===\"email\"&&isConnected&&/*#__PURE__*/_jsxs(\"div\",{className:\"border-t px-4 pb-4 \".concat(darkMode?\"border-gray-700\":\"border-gray-100\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-3 mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-medium \".concat(darkMode?\"text-gray-300\":\"text-gray-600\"),children:[\"Managed Inboxes (\",integrations.email.inboxes.length,\"/20)\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddInbox(true),className:\"text-xs text-amber-600 hover:text-amber-700 font-medium\",children:\"+ Add Inbox\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded-lg overflow-hidden border text-xs \".concat(darkMode?\"border-gray-700\":\"border-gray-100\"),children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:darkMode?\"bg-gray-700/50 text-gray-400\":\"bg-gray-50 text-gray-500\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-2 py-1.5 font-medium\",children:\"Inbox\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left px-2 py-1.5 font-medium\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-1.5\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:integrations.email.inboxes.map(inbox=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t \".concat(darkMode?\"border-gray-700 text-gray-300\":\"border-gray-50 text-gray-700\"),children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1.5 font-mono text-xs truncate max-w-[140px]\",children:inbox.address}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1.5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 bg-green-50 px-1.5 py-0.5 rounded text-xs\",children:\"Active\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1.5 flex gap-1 justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteInbox(inbox.id),className:\"p-1 rounded text-gray-400 hover:text-red-500\",children:\"\\uD83D\\uDDD1\\uFE0F\"})})]},inbox.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t \".concat(darkMode?\"border-gray-700\":\"border-gray-100\"),children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setExpandedDetails(p=>_objectSpread(_objectSpread({},p),{},{[type]:!p[type]})),className:\"w-full flex items-center justify-between px-4 py-2.5 text-xs \".concat(darkMode?\"text-gray-400 hover:bg-gray-700/50\":\"text-gray-500 hover:bg-gray-50\"),children:[/*#__PURE__*/_jsx(\"span\",{children:\"Integration Details\"}),/*#__PURE__*/_jsx(\"span\",{children:expandedDetails[type]?\"â–²\":\"â–¼\"})]}),expandedDetails[type]&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 pb-4 space-y-2 text-xs \".concat(darkMode?\"text-gray-400\":\"text-gray-500\"),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Webhook:\"}),\" \",/*#__PURE__*/_jsx(\"code\",{className:\"font-mono text-xs px-1 rounded \".concat(darkMode?\"bg-gray-700 text-amber-400\":\"bg-gray-100 text-amber-600\"),children:details.webhook})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Auth:\"}),\" \",details.auth]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Events:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:details.events.map(e=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-500\",children:\"\\u2022\"}),\" \",e]},e))})]})]})]})]},type);})}),connectModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\",onClick:()=>setConnectModal(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl shadow-2xl w-full max-w-md mx-4 p-5 \".concat(darkMode?\"bg-gray-800 text-white\":\"bg-white text-gray-900\"),onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"font-semibold mb-4 capitalize\",children:[\"Connect \",connectModal]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter value...\",className:\"w-full border rounded-lg px-3 py-2 text-sm mb-4 \".concat(darkMode?\"bg-gray-700 border-gray-600 text-white\":\"bg-gray-50 border-gray-200\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConnectModal(null),className:\"flex-1 border rounded-lg py-2 text-sm \".concat(darkMode?\"border-gray-600 text-gray-300\":\"border-gray-200 text-gray-600\"),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleConnect(connectModal,\"connected\");setConnectModal(null);},className:\"flex-1 bg-amber-500 text-white rounded-lg py-2 text-sm font-medium hover:bg-amber-600\",children:\"Connect\"})]})]})}),showAddInbox&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\",onClick:()=>setShowAddInbox(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl shadow-2xl w-full max-w-md mx-4 p-5 \".concat(darkMode?\"bg-gray-800 text-white\":\"bg-white text-gray-900\"),onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold mb-4\",children:\"Add Inbox\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"support@yourcompany.com\",className:\"w-full border rounded-lg px-3 py-2 text-sm mb-4 \".concat(darkMode?\"bg-gray-700 border-gray-600 text-white\":\"bg-gray-50 border-gray-200\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddInbox(false),className:\"flex-1 border rounded-lg py-2 text-sm \".concat(darkMode?\"border-gray-600 text-gray-300\":\"border-gray-200 text-gray-600\"),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleAddInbox({address:\"new@company.com\",department:\"Support\",owner:\"\",priority:\"Medium\"});setShowAddInbox(false);},className:\"flex-1 bg-amber-500 text-white rounded-lg py-2 text-sm font-medium hover:bg-amber-600\",children:\"Add Inbox\"})]})]})})]})});}function LoginScreen(_ref28){let{onLogin}=_ref28;const[selected,setSelected]=useState(\"\");return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-amber-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-amber-500 rounded-2xl flex items-center justify-center text-4xl mx-auto mb-4 shadow-lg\",children:\"\\uD83D\\uDC1D\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Beehive\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm mt-1\",children:[\"All of your messages stored, classified,\",/*#__PURE__*/_jsx(\"br\",{}),\"categorized and routed in one place!\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold text-gray-900 mb-4\",children:\"Sign in to your account\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-500 mb-1 block\",children:\"Select User\"}),/*#__PURE__*/_jsxs(\"select\",{value:selected,onChange:e=>setSelected(e.target.value),className:\"w-full border border-gray-200 rounded-xl px-4 py-3 text-sm text-gray-700 mb-4 bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose an account...\"}),USERS.map(u=>/*#__PURE__*/_jsxs(\"option\",{value:u.id,children:[u.name,\" - \",u.role,\" (\",u.department.toLowerCase(),\")\"]},u.id))]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>selected&&onLogin(+selected),disabled:!selected,className:\"w-full bg-amber-500 disabled:bg-amber-300 text-white py-3 rounded-xl font-semibold text-sm hover:bg-amber-600 transition-colors\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-xs text-gray-400 mt-4\",children:\"Beehive Communications Hub \\xA9 2026\"})]})});}export default function App(){const[currentUserId,setCurrentUserId]=useState(null);const[view,setView]=useState(\"messages\");const[messages,setMessages]=useState(INITIAL_MESSAGES);const[darkMode,setDarkMode]=useState(false);const[showSettings,setShowSettings]=useState(false);const[showUpload,setShowUpload]=useState(false);const[showNotifs,setShowNotifs]=useState(false);const currentUser=USERS.find(u=>u.id===currentUserId);const updateMessage=updated=>setMessages(msgs=>msgs.map(m=>m.id===updated.id?updated:m));const addMessage=form=>{const newMsg={id:messages.length+1,from:form.contactName||\"Unknown\",subject:form.subject||\"(No Subject)\",body:form.body,channel:form.channel.toLowerCase(),priority:form.priority,confidence:form.confidence,department:form.department,status:\"pending\",assignedTo:form.assignedTo,date:new Date().toLocaleDateString(\"en-US\",{month:\"numeric\",day:\"numeric\",year:\"numeric\"}),contactInfo:form.contactInfo,priorityReason:\"Manually uploaded with \".concat(form.priority.toLowerCase(),\" priority.\"),confidenceReason:\"Manually classified with \".concat(form.confidence,\".\"),internalNotes:[],changeLog:[],needsReview:form.confidence===\"Low Confidence\"};setMessages(msgs=>[newMsg,...msgs]);};const ctx={messages,updateMessage};if(!currentUser)return/*#__PURE__*/_jsx(AppContext.Provider,{value:ctx,children:/*#__PURE__*/_jsx(LoginScreen,{onLogin:id=>{setCurrentUserId(id);setView(\"messages\");}})});const isManager=currentUser.role===\"Manager\";const isAdmin=currentUser.role===\"Admin\";const unreadCount=2;return/*#__PURE__*/_jsx(AppContext.Provider,{value:ctx,children:/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col overflow-hidden \".concat(darkMode?\"bg-gray-900\":\"bg-gray-50\"),children:[/*#__PURE__*/_jsx(Header,{view:view,setView:setView,currentUser:currentUser,darkMode:darkMode,onSettingsOpen:()=>setShowSettings(true),onNotifOpen:()=>setShowNotifs(true),unreadCount:unreadCount}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-hidden flex flex-col\",children:view===\"integrations\"?/*#__PURE__*/_jsx(IntegrationsScreen,{darkMode:darkMode}):view===\"messages\"?/*#__PURE__*/_jsx(MessagesView,{isManager:isManager||isAdmin,currentUser:currentUser,darkMode:darkMode}):view===\"dashboard\"&&(isManager||isAdmin)?/*#__PURE__*/_jsx(ManagerDashboard,{currentUser:currentUser,onUpload:()=>setShowUpload(true),darkMode:darkMode}):view===\"dashboard\"?/*#__PURE__*/_jsx(EmployeeDashboard,{currentUser:currentUser,darkMode:darkMode}):/*#__PURE__*/_jsx(EmployeeDashboard,{currentUser:currentUser,darkMode:darkMode})}),showSettings&&/*#__PURE__*/_jsx(SettingsModal,{user:currentUser,darkMode:darkMode,toggleDarkMode:()=>setDarkMode(d=>!d),onLogout:()=>{setCurrentUserId(null);setShowSettings(false);},onClose:()=>setShowSettings(false)}),showUpload&&/*#__PURE__*/_jsx(UploadModal,{onClose:()=>setShowUpload(false),onSubmit:addMessage,currentUser:currentUser,darkMode:darkMode}),showNotifs&&/*#__PURE__*/_jsx(NotificationPanel,{onClose:()=>setShowNotifs(false),darkMode:darkMode})]})});}","map":{"version":3,"names":["useState","useContext","createContext","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AppContext","USERS","id","name","role","department","INITIAL_MESSAGES","from","subject","body","channel","priority","confidence","status","assignedTo","date","contactInfo","priorityReason","confidenceReason","internalNotes","changeLog","needsReview","SYSTEM_NOTIFICATIONS","icon","title","time","read","getPriorityColor","p","getPriorityIcon","getConfidenceColor","c","getConfidenceIcon","getStatusColor","s","getChannelIcon","ch","getUserById","find","u","getInitials","split","map","n","join","slice","AVATAR_COLORS","Avatar","_ref","size","idx","charCodeAt","length","sz","className","concat","children","Tooltip","_ref2","text","show","setShow","onMouseEnter","onMouseLeave","onClick","PriorityBadge","_ref3","message","ConfidenceBadge","_ref4","DataWarningBanner","_ref5","darkMode","missing","push","UrgentAlert","_ref6","messages","dismissed","onDismiss","items","filter","m","includes","forEach","ConfirmDialog","_ref7","onConfirm","onCancel","e","stopPropagation","NotificationPanel","_ref8","onClose","notifs","setNotifs","unread","markRead","x","_objectSpread","markAll","CapabilityBanner","_ref9","caps","i","Header","_ref0","view","setView","currentUser","onSettingsOpen","onNotifOpen","unreadCount","SettingsModal","_ref1","user","toggleDarkMode","onLogout","readOnly","value","_ref10","l","d","MessageListItem","_ref11","selected","assignee","toLowerCase","MessageDetail","_ref12","_localMsg$changeLog","_localMsg$changeLog2","isManager","onUpdate","note","setNote","localMsg","setLocalMsg","confirm","setConfirm","showLog","setShowLog","inputCls","applyChange","field","val","_getUserById","_getUserById2","entry","String","to","Date","toLocaleTimeString","updated","stageChange","highImpact","_getUserById3","label","addNote","trim","author","onChange","target","rows","placeholder","MessagesView","_ref13","updateMessage","setSelected","search","setSearch","sort","setSort","showDetail","setShowDetail","setDismissed","showCapability","setShowCapability","filtered","sorted","a","b","o","Urgent","Medium","Low","selectedMsg","StatCard","_ref14","sub","subColor","MiniBar","_ref15","count","total","color","pct","style","width","AI_INSIGHTS_DATA","type","badge","badgeColor","actionable","applied","TrendChart","_ref16","data","w","h","pad","max","Math","min","range","points","y","pathD","areaD","viewBox","maxHeight","x1","y1","x2","y2","offset","stopColor","stopOpacity","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","textAnchor","fontSize","AIPerformanceInsights","_ref17","scopeMessages","allMessages","expanded","setExpanded","trendMetric","setTrendMetric","chartType","setChartType","msgs","resolved","urgent","lowConf","resolutionRate","round","urgentRatio","confOverrides","escalationRate","patterns","pendingCount","trendData","Volume","Response","Priority","trendColors","card","metricCard","analysisText","maxVal","height","backgroundColor","opacity","RecentTasksTable","_ref18","taskMessages","onViewAll","recent","thCls","tdCls","owner","AIInsightsPanel","_ref19","insights","setInsights","handleApply","prev","handleDismiss","visible","urgentPending","lowConfCount","insight","ManagerDashboard","_ref20","onUpload","byPriority","byDept","byChannel","byConf","statusCounts","pending","assigned","workload","sT","Object","entries","_ref21","_ref22","_ref23","EmployeeDashboard","_ref24","myMsgs","stats","UploadModal","_ref25","onSubmit","form","setForm","contactName","k","v","f","modal","INITIAL_INTEGRATIONS","email","connected","inboxes","address","instagram","handle","shopify","store","telephony","number","IntegrationsScreen","_ref26","integrations","setIntegrations","connectModal","setConnectModal","showAddInbox","setShowAddInbox","expandedDetails","setExpandedDetails","connectedCount","values","handleConnect","handleDisconnect","handleAddInbox","now","handleDeleteInbox","CONFIGS","desc","details","webhook","auth","events","_ref27","_integrations$type","isConnected","inbox","LoginScreen","_ref28","onLogin","disabled","App","currentUserId","setCurrentUserId","setMessages","setDarkMode","showSettings","setShowSettings","showUpload","setShowUpload","showNotifs","setShowNotifs","addMessage","newMsg","toLocaleDateString","month","day","year","ctx","Provider","isAdmin"],"sources":["C:/apps/beehive/src/App.jsx"],"sourcesContent":["import { useState, useContext, createContext, useEffect } from \"react\";\n\nconst AppContext = createContext(null);\n\nconst USERS = [\n  { id: 1, name: \"Sarah Johnson\", role: \"Employee\", department: \"Sales\" },\n  { id: 2, name: \"Michael Chen\", role: \"Manager\", department: \"Sales\" },\n  { id: 3, name: \"Emily Davis\", role: \"Employee\", department: \"Hr\" },\n  { id: 4, name: \"James Wilson\", role: \"Employee\", department: \"Marketing\" },\n  { id: 5, name: \"Lisa Anderson\", role: \"Employee\", department: \"Finance\" },\n  { id: 6, name: \"David Brown\", role: \"Employee\", department: \"Support\" },\n  { id: 7, name: \"Rachel Green\", role: \"Manager\", department: \"Marketing\" },\n  { id: 8, name: \"Tom Harris\", role: \"Manager\", department: \"Hr\" },\n  { id: 9, name: \"System Admin\", role: \"Admin\", department: \"Sales\" },\n];\n\nconst INITIAL_MESSAGES = [\n  { id: 1, from: \"William Taylor\", subject: \"Payment Failed\", body: \"Our payment just failed and our account is locked. We need immediate assistance as this is affecting our production environment.\", channel: \"chat\", priority: \"Urgent\", confidence: \"High Confidence\", department: \"Finance\", status: \"pending\", assignedTo: 5, date: \"1/22/2026\", contactInfo: \"william@company.com\", priorityReason: \"The message reports an account access issue and uses time-sensitive language ('locked', 'immediate assistance'), indicating a potential operational disruption affecting production.\", confidenceReason: \"The message contains clear financial terminology and an explicit account status issue, making classification straightforward.\", internalNotes: [], changeLog: [], needsReview: false },\n  { id: 2, from: \"Karen White\", subject: \"Password Reset Issue\", body: \"I've tried resetting my password 3 times but I'm not receiving the reset email. Can someone help?\", channel: \"email\", priority: \"Medium\", confidence: \"Medium Confidence\", department: \"Support\", status: \"assigned\", assignedTo: 6, date: \"1/22/2026\", contactInfo: \"karen@email.com\", priorityReason: \"The message contains a clear request but does not indicate immediate impact or time sensitivity. The issue is frustrating but does not suggest operational disruption.\", confidenceReason: \"The message uses terminology common to both support and account management, requiring some judgment in routing.\", internalNotes: [], changeLog: [], needsReview: false },\n  { id: 3, from: \"Sophie Turner\", subject: \"Benefits Inquiry\", body: \"CALL TRANSCRIPT - Duration: 4m 18s Agent: HR Department, this is Tom speaking. How may I assist you? Sophie Turner: Hi Tom, I just started last Monday and I had some questions about the health benefits.\", channel: \"phone\", priority: \"Low\", confidence: \"Medium Confidence\", department: \"Hr\", status: \"assigned\", assignedTo: 8, date: \"1/22/2026\", contactInfo: \"sophie@email.com\", priorityReason: \"The message is informational and does not suggest urgency, deadlines, or negative consequences if delayed. This is a routine onboarding inquiry.\", confidenceReason: \"Phone transcripts can sometimes lose nuance, and the HR/benefits topic could overlap with other departments.\", internalNotes: [], changeLog: [], needsReview: false },\n  { id: 4, from: \"Maria Garcia\", subject: \"Critical System Outage\", body: \"CALL TRANSCRIPT - Duration: 8m 32s Agent: Thank you for calling support, this is David. How can I help you today? Maria Garcia: Hi yes, we're having a major emergency here. Our entire system just went down.\", channel: \"phone\", priority: \"Urgent\", confidence: \"High Confidence\", department: \"Support\", status: \"in-process\", assignedTo: 6, date: \"1/22/2026\", contactInfo: \"maria@company.com\", priorityReason: \"The message reports a service disruption and uses explicit urgency language ('major emergency', 'entire system'), indicating potential operational impact.\", confidenceReason: \"The message contains clear support terminology and an explicit system outage scenario, making classification highly confident.\", internalNotes: [], changeLog: [], needsReview: false },\n  { id: 5, from: \"John Smith\", subject: \"Enterprise License Inquiry\", body: \"Hello, I'm interested in purchasing an enterprise license for our team of 150 employees. Could you provide pricing information and schedule a demo?\", channel: \"email\", priority: \"Urgent\", confidence: \"High Confidence\", department: \"Sales\", status: \"assigned\", assignedTo: 1, date: \"1/22/2026\", contactInfo: \"john@bigcorp.com\", priorityReason: \"The message represents a high-value sales opportunity with a specific team size mentioned (150 employees), suggesting urgency to respond before the prospect looks elsewhere.\", confidenceReason: \"This message uses terminology specific to sales and has clear and direct language, making classification highly confident.\", internalNotes: [], changeLog: [], needsReview: false },\n  { id: 6, from: \"Daniel Martinez\", subject: \"Trial Extension Request\", body: \"Our trial is ending tomorrow but we need another week to complete our evaluation. Our CTO is out of town. Can we extend?\", channel: \"email\", priority: \"Medium\", confidence: \"High Confidence\", department: \"Sales\", status: \"in-process\", assignedTo: 1, date: \"1/22/2026\", contactInfo: \"daniel@startup.io\", priorityReason: \"The message has a time-sensitive element (trial ending tomorrow) but does not indicate immediate negative impact or service disruption.\", confidenceReason: \"Trial extension requests are common sales department tasks with clear, unambiguous language.\", internalNotes: [], changeLog: [], needsReview: false },\n  { id: 7, from: \"@TechStartupXYZ\", subject: \"Partnership Opportunity\", body: \"We love your product! We're a tech startup with 50K followers and would love to explore a partnership or affiliate program.\", channel: \"social\", priority: \"Medium\", confidence: \"Low Confidence\", department: \"Marketing\", status: \"assigned\", assignedTo: 4, date: \"1/22/2026\", contactInfo: \"@TechStartupXYZ\", priorityReason: \"The message contains a clear request but does not indicate immediate impact or time sensitivity. Partnership discussions can be scheduled.\", confidenceReason: \"Social media partnership requests could fall under both marketing and sales, requiring judgment in routing.\", internalNotes: [], changeLog: [], needsReview: true },\n  { id: 8, from: \"Patricia Moore\", subject: \"Feature Request - Dark Mode\", body: \"Would love to see a dark mode option in the dashboard. Many of us work late hours and it would be easier on the eyes.\", channel: \"email\", priority: \"Medium\", confidence: \"Low Confidence\", department: \"Support\", status: \"assigned\", assignedTo: 6, date: \"1/22/2026\", contactInfo: \"patricia@email.com\", priorityReason: \"The message contains a clear request but does not indicate immediate impact or time sensitivity. Feature requests are valuable but rarely urgent.\", confidenceReason: \"Feature requests can be directed to support, product, or engineering teams depending on organisational structure.\", internalNotes: [], changeLog: [], needsReview: true },\n  { id: 9, from: \"Robert Kim\", subject: \"Invoice Discrepancy\", body: \"We received invoice #INV-2024-1234 but the amount doesn't match our contract terms. We were quoted $5,000/month but the invoice shows $6,500.\", channel: \"email\", priority: \"Urgent\", confidence: \"High Confidence\", department: \"Finance\", status: \"in-process\", assignedTo: 5, date: \"1/22/2026\", contactInfo: \"robert@company.com\", priorityReason: \"The message reports a financial discrepancy with specific figures, suggesting a potential billing error that could affect the business relationship.\", confidenceReason: \"Invoice and billing issues are clearly finance department matters with unambiguous financial terminology.\", internalNotes: [], changeLog: [], needsReview: false },\n  { id: 10, from: \"Alex Thompson\", subject: \"Job Application - Senior Developer\", body: \"I am writing to express my interest in the Senior Developer position. I have 8 years of experience in React and Node.js.\", channel: \"email\", priority: \"Medium\", confidence: \"High Confidence\", department: \"Hr\", status: \"pending\", assignedTo: 3, date: \"1/21/2026\", contactInfo: \"alex@dev.com\", priorityReason: \"The message contains a clear request but does not indicate immediate impact. Job applications follow a standard review process.\", confidenceReason: \"Job applications are clearly HR department matters with standard professional language.\", internalNotes: [], changeLog: [], needsReview: false },\n  { id: 11, from: \"Jennifer Lee\", subject: \"Pricing Question\", body: \"What's the difference between the Pro and Enterprise plans?\", channel: \"chat\", priority: \"Low\", confidence: \"High Confidence\", department: \"Sales\", status: \"resolved\", assignedTo: 2, date: \"1/21/2026\", contactInfo: \"jennifer@email.com\", priorityReason: \"The message is informational and does not suggest urgency, deadlines, or negative consequences if delayed.\", confidenceReason: \"Pricing inquiries are straightforward sales department questions.\", internalNotes: [], changeLog: [], needsReview: false },\n  { id: 12, from: \"@HappyCustomer\", subject: \"Positive Feedback\", body: \"Just wanted to say your customer service team is amazing! They helped me resolve my issue in under 10 minutes. 5 stars!\", channel: \"social\", priority: \"Low\", confidence: \"Low Confidence\", department: \"Marketing\", status: \"resolved\", assignedTo: 7, date: \"1/21/2026\", contactInfo: \"@HappyCustomer\", priorityReason: \"The message is positive feedback with no action required beyond acknowledgment. No urgency or negative consequences if delayed.\", confidenceReason: \"Positive feedback on social media could be monitored by marketing, support, or customer success teams.\", internalNotes: [], changeLog: [], needsReview: false },\n];\n\nconst SYSTEM_NOTIFICATIONS = [\n  { id: 1, icon: \"ðŸ¤–\", title: \"AI Classification Updated\", body: \"Confidence thresholds for social channel messages have been recalibrated. Low-confidence routing now defaults to human review.\", time: \"2 min ago\", read: false },\n  { id: 2, icon: \"ðŸ”§\", title: \"New Capability: Telephony\", body: \"Phone call transcription is now active. Call transcripts will appear automatically in your message queue.\", time: \"1 hour ago\", read: false },\n  { id: 3, icon: \"ðŸš¨\", title: \"Urgent Message Unassigned\", body: \"William Taylor's 'Payment Failed' message has been pending for over 30 minutes without assignment.\", time: \"2 hours ago\", read: true },\n  { id: 4, icon: \"ðŸ“Š\", title: \"Routing Rules Updated\", body: \"Finance department routing now prioritises messages containing invoice or billing keywords.\", time: \"Yesterday\", read: true },\n];\n\nconst getPriorityColor = p => p === \"Urgent\" ? \"text-red-600 bg-red-50 border-red-200\" : p === \"Medium\" ? \"text-amber-600 bg-amber-50 border-amber-200\" : \"text-green-600 bg-green-50 border-green-200\";\nconst getPriorityIcon = p => p === \"Urgent\" ? \"ðŸ”´\" : p === \"Medium\" ? \"ðŸŸ¡\" : \"ðŸŸ¢\";\nconst getConfidenceColor = c => c === \"High Confidence\" ? \"text-green-600 bg-green-50 border-green-200\" : c === \"Medium Confidence\" ? \"text-amber-600 bg-amber-50 border-amber-200\" : \"text-red-600 bg-red-50 border-red-200\";\nconst getConfidenceIcon = c => c === \"High Confidence\" ? \"âœ…\" : c === \"Medium Confidence\" ? \"âš ï¸\" : \"âŒ\";\nconst getStatusColor = s => s === \"pending\" ? \"text-gray-600 bg-gray-100\" : s === \"assigned\" ? \"text-blue-600 bg-blue-100\" : s === \"in-process\" ? \"text-purple-600 bg-purple-100\" : \"text-green-600 bg-green-100\";\nconst getChannelIcon = ch => ch === \"email\" ? \"âœ‰\" : ch === \"phone\" ? \"ðŸ“ž\" : ch === \"chat\" ? \"ðŸ’¬\" : ch === \"social\" ? \"#\" : \"ðŸ“±\";\nconst getUserById = id => USERS.find(u => u.id === id);\nconst getInitials = name => name.split(\" \").map(n => n[0]).join(\"\").slice(0, 2);\nconst AVATAR_COLORS = [\"bg-violet-500\",\"bg-blue-500\",\"bg-green-500\",\"bg-orange-500\",\"bg-pink-500\",\"bg-teal-500\",\"bg-red-500\",\"bg-indigo-500\",\"bg-amber-500\"];\n\nfunction Avatar({ name, size = \"md\" }) {\n  const idx = name.charCodeAt(0) % AVATAR_COLORS.length;\n  const sz = size === \"sm\" ? \"w-7 h-7 text-xs\" : size === \"lg\" ? \"w-10 h-10 text-sm\" : \"w-8 h-8 text-xs\";\n  return <span className={`${sz} ${AVATAR_COLORS[idx]} rounded-full flex items-center justify-center text-white font-bold flex-shrink-0`}>{getInitials(name)}</span>;\n}\n\nfunction Tooltip({ text, children }) {\n  const [show, setShow] = useState(false);\n  return (\n    <span className=\"relative inline-flex items-center\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)} onClick={() => setShow(s => !s)}>\n      {children}\n      {show && <span className=\"absolute z-50 bottom-full left-0 mb-2 w-64 text-xs bg-gray-900 text-white rounded-lg p-2.5 shadow-xl leading-relaxed pointer-events-none\">{text}<span className=\"absolute top-full left-4 -mt-1 border-4 border-transparent border-t-gray-900\" /></span>}\n    </span>\n  );\n}\n\nfunction PriorityBadge({ message }) {\n  return <Tooltip text={message.priorityReason}><span className={`text-xs px-2 py-0.5 rounded-full border flex items-center gap-1 cursor-help ${getPriorityColor(message.priority)}`}>{getPriorityIcon(message.priority)} {message.priority}</span></Tooltip>;\n}\n\nfunction ConfidenceBadge({ message }) {\n  return <Tooltip text={message.confidenceReason}><span className={`text-xs px-2 py-0.5 rounded-full border flex items-center gap-1 cursor-help ${getConfidenceColor(message.confidence)}`}>{getConfidenceIcon(message.confidence)} {message.confidence}</span></Tooltip>;\n}\n\n// G2: Data quality warning\nfunction DataWarningBanner({ message, darkMode }) {\n  const missing = [];\n  if (!message.contactInfo || message.contactInfo === \"Unknown\") missing.push(\"contact info\");\n  if (message.confidence === \"Low Confidence\") missing.push(\"confident classification\");\n  if (missing.length === 0) return null;\n  return (\n    <div className={`flex items-start gap-2 p-2.5 rounded-lg text-xs border ${darkMode ? \"bg-amber-900/20 border-amber-700/40 text-amber-300\" : \"bg-amber-50 border-amber-200 text-amber-800\"}`}>\n      <span className=\"flex-shrink-0 mt-0.5\">âš ï¸</span>\n      <span><strong>AI confidence is limited</strong> â€” this message has {missing.join(\" and \")}. Human review is recommended before routing.</span>\n    </div>\n  );\n}\n\n// G3: Urgent unassigned alert\nfunction UrgentAlert({ messages, dismissed, onDismiss, darkMode }) {\n  const items = messages.filter(m => m.priority === \"Urgent\" && m.status === \"pending\" && !dismissed.includes(m.id));\n  if (!items.length) return null;\n  return (\n    <div className={`mx-3 mt-2 rounded-lg border p-2.5 ${darkMode ? \"bg-red-900/20 border-red-700/40\" : \"bg-red-50 border-red-200\"}`}>\n      <div className=\"flex items-center justify-between mb-1\">\n        <span className={`text-xs font-semibold flex items-center gap-1 ${darkMode ? \"text-red-300\" : \"text-red-700\"}`}>ðŸš¨ {items.length} Urgent {items.length > 1 ? \"messages need\" : \"message needs\"} immediate attention</span>\n        <button onClick={() => items.forEach(m => onDismiss(m.id))} className={`text-xs ${darkMode ? \"text-red-400\" : \"text-red-500\"} hover:underline`}>Dismiss all</button>\n      </div>\n      {items.map(m => <div key={m.id} className={`text-xs flex items-center justify-between py-0.5 ${darkMode ? \"text-red-300\" : \"text-red-600\"}`}><span>{m.from} â€” {m.subject}</span><button onClick={() => onDismiss(m.id)} className=\"ml-2 opacity-50 hover:opacity-100\">âœ•</button></div>)}\n    </div>\n  );\n}\n\n// G16: Confirm dialog\nfunction ConfirmDialog({ title, message, onConfirm, onCancel, darkMode }) {\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\" onClick={onCancel}>\n      <div className={`rounded-xl shadow-2xl w-full max-w-sm mx-4 p-5 ${darkMode ? \"bg-gray-800 text-white\" : \"bg-white text-gray-900\"}`} onClick={e => e.stopPropagation()}>\n        <div className=\"text-base font-semibold mb-2\">{title}</div>\n        <div className={`text-sm mb-4 ${darkMode ? \"text-gray-300\" : \"text-gray-600\"}`}>{message}</div>\n        <div className=\"flex gap-3\">\n          <button onClick={onCancel} className={`flex-1 border rounded-lg py-2 text-sm ${darkMode ? \"border-gray-600 text-gray-300\" : \"border-gray-200 text-gray-600\"}`}>Cancel</button>\n          <button onClick={onConfirm} className=\"flex-1 bg-amber-500 text-white rounded-lg py-2 text-sm font-medium hover:bg-amber-600\">Confirm</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// G18: Notification panel\nfunction NotificationPanel({ onClose, darkMode }) {\n  const [notifs, setNotifs] = useState(SYSTEM_NOTIFICATIONS);\n  const unread = notifs.filter(n => !n.read).length;\n  const markRead = id => setNotifs(n => n.map(x => x.id === id ? { ...x, read: true } : x));\n  const markAll = () => setNotifs(n => n.map(x => ({ ...x, read: true })));\n  return (\n    <div className=\"fixed inset-0 z-50 flex justify-end\" onClick={onClose}>\n      <div className={`w-full max-w-sm h-full shadow-2xl flex flex-col ${darkMode ? \"bg-gray-800\" : \"bg-white\"}`} onClick={e => e.stopPropagation()}>\n        <div className={`flex items-center justify-between p-4 border-b ${darkMode ? \"border-gray-700\" : \"border-gray-200\"}`}>\n          <div>\n            <span className={`font-semibold text-sm ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Notifications</span>\n            {unread > 0 && <span className=\"ml-2 text-xs bg-amber-500 text-white px-1.5 py-0.5 rounded-full\">{unread} new</span>}\n          </div>\n          <div className=\"flex items-center gap-3\">\n            {unread > 0 && <button onClick={markAll} className=\"text-xs text-amber-600 hover:underline\">Mark all read</button>}\n            <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">âœ•</button>\n          </div>\n        </div>\n        <div className=\"flex-1 overflow-y-auto\">\n          {notifs.map(n => (\n            <div key={n.id} onClick={() => markRead(n.id)} className={`p-4 border-b cursor-pointer transition-colors ${!n.read ? (darkMode ? \"bg-amber-900/10 border-gray-700\" : \"bg-amber-50 border-amber-100\") : (darkMode ? \"border-gray-700 hover:bg-gray-700/50\" : \"border-gray-100 hover:bg-gray-50\")}`}>\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-xl flex-shrink-0\">{n.icon}</span>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 mb-0.5\">\n                    <span className={`text-xs font-semibold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{n.title}</span>\n                    {!n.read && <span className=\"w-2 h-2 bg-amber-500 rounded-full flex-shrink-0\" />}\n                  </div>\n                  <p className={`text-xs leading-relaxed ${darkMode ? \"text-gray-400\" : \"text-gray-600\"}`}>{n.body}</p>\n                  <span className={`text-xs mt-1 block ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>{n.time}</span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n        <div className={`p-3 border-t text-xs text-center italic ${darkMode ? \"border-gray-700 text-gray-500\" : \"border-gray-100 text-gray-400\"}`}>\n          AI behaviour changes are always communicated here before taking effect\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// G1: Capability banner\nfunction CapabilityBanner({ role, onDismiss, darkMode }) {\n  const caps = role === \"Manager\" || role === \"Admin\"\n    ? [\"View, assign & reprioritise all inbound messages\", \"AI classifies priority, department & routing confidence\", \"Override any AI suggestion â€” you have final control\", \"Analytics dashboard shows team workload and trends\"]\n    : [\"View messages assigned to you\", \"AI has pre-classified priority and department\", \"Add internal notes and update message status\", \"Hover any priority or confidence badge to see AI reasoning\"];\n  return (\n    <div className={`mx-3 mt-2 rounded-lg border p-3 ${darkMode ? \"bg-blue-900/20 border-blue-700/40\" : \"bg-blue-50 border-blue-200\"}`}>\n      <div className=\"flex items-start justify-between gap-2\">\n        <div className=\"flex-1\">\n          <div className={`text-xs font-semibold mb-1.5 ${darkMode ? \"text-blue-300\" : \"text-blue-800\"}`}>ðŸ¤– What AI does in BeeHive ({role} view)</div>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-1\">\n            {caps.map((c, i) => <div key={i} className={`text-xs flex items-start gap-1 ${darkMode ? \"text-blue-300\" : \"text-blue-700\"}`}><span className=\"flex-shrink-0\">â€¢</span><span>{c}</span></div>)}\n          </div>\n        </div>\n        <button onClick={onDismiss} className={`text-xs flex-shrink-0 mt-0.5 ${darkMode ? \"text-blue-400\" : \"text-blue-600\"} hover:underline`}>Got it âœ•</button>\n      </div>\n    </div>\n  );\n}\n\nfunction Header({ view, setView, currentUser, onSettingsOpen, onNotifOpen, unreadCount, darkMode }) {\n  return (\n    <header className={`flex items-center justify-between px-4 h-14 border-b flex-shrink-0 ${darkMode ? \"bg-gray-900 border-gray-700\" : \"bg-white border-gray-200\"}`}>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center text-white font-bold\">ðŸ</div>\n        <div className=\"hidden sm:block\">\n          <div className={`text-sm font-bold leading-tight ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Beehive</div>\n          <div className={`text-xs leading-tight ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Communications Hub</div>\n        </div>\n      </div>\n      <nav className=\"flex items-center gap-1\">\n        {currentUser.role === \"Admin\" ? (\n          <>\n            <button onClick={() => setView(\"messages\")} className={`text-xs px-3 py-1.5 rounded-lg font-medium transition-colors ${view === \"messages\" ? \"bg-amber-100 text-amber-700 border border-amber-300\" : darkMode ? \"text-gray-300 hover:bg-gray-800\" : \"text-gray-600 hover:bg-gray-100\"}`}>Messages</button>\n            <button onClick={() => setView(\"dashboard\")} className={`text-xs px-3 py-1.5 rounded-lg font-medium transition-colors ${view === \"dashboard\" ? \"bg-amber-100 text-amber-700 border border-amber-300\" : darkMode ? \"text-gray-300 hover:bg-gray-800\" : \"text-gray-600 hover:bg-gray-100\"}`}>ðŸ“Š Dashboard</button>\n            <button onClick={() => setView(\"integrations\")} className={`text-xs px-3 py-1.5 rounded-lg font-medium transition-colors ${view === \"integrations\" ? \"bg-amber-100 text-amber-700 border border-amber-300\" : darkMode ? \"text-gray-300 hover:bg-gray-800\" : \"text-gray-600 hover:bg-gray-100\"}`}>ðŸ”— Integrations</button>\n          </>\n        ) : (\n          <>\n            <button onClick={() => setView(\"messages\")} className={`text-xs px-3 py-1.5 rounded-lg font-medium transition-colors ${view === \"messages\" ? \"bg-amber-100 text-amber-700 border border-amber-300\" : darkMode ? \"text-gray-300 hover:bg-gray-800\" : \"text-gray-600 hover:bg-gray-100\"}`}>Messages</button>\n            <button onClick={() => setView(\"dashboard\")} className={`text-xs px-3 py-1.5 rounded-lg font-medium transition-colors ${view === \"dashboard\" ? \"bg-amber-100 text-amber-700 border border-amber-300\" : darkMode ? \"text-gray-300 hover:bg-gray-800\" : \"text-gray-600 hover:bg-gray-100\"}`}>ðŸ“Š Dashboard</button>\n            {currentUser.role === \"Manager\" && \n              <button onClick={() => setView(\"integrations\")} className={`text-xs px-3 py-1.5 rounded-lg font-medium transition-colors ${view === \"integrations\" ? \"bg-amber-100 text-amber-700 border border-amber-300\" : darkMode ? \"text-gray-300 hover:bg-gray-800\" : \"text-gray-600 hover:bg-gray-100\"}`}>ðŸ”— Integrations</button>\n            }\n          </>\n        )}\n      </nav>\n      <div className=\"flex items-center gap-2\">\n        <button onClick={onNotifOpen} className={`p-1.5 rounded-lg relative ${darkMode ? \"text-gray-300 hover:bg-gray-800\" : \"text-gray-500 hover:bg-gray-100\"}`}>\n          ðŸ””\n          {unreadCount > 0 && <span className=\"absolute -top-0.5 -right-0.5 w-4 h-4 bg-red-500 rounded-full text-white text-xs flex items-center justify-center font-bold leading-none\">{unreadCount}</span>}\n        </button>\n        <button onClick={onSettingsOpen} className={`p-1.5 rounded-lg ${darkMode ? \"text-gray-300 hover:bg-gray-800\" : \"text-gray-500 hover:bg-gray-100\"}`}>âš™ï¸</button>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"hidden sm:block text-right\">\n            <div className={`text-xs font-medium ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{currentUser.name}</div>\n            <div className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>{currentUser.role}</div>\n          </div>\n          <Avatar name={currentUser.name} />\n        </div>\n      </div>\n    </header>\n  );\n}\n\nfunction SettingsModal({ user, onClose, darkMode, toggleDarkMode, onLogout }) {\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\" onClick={onClose}>\n      <div className={`w-full max-w-md mx-4 rounded-xl shadow-2xl ${darkMode ? \"bg-gray-800 text-white\" : \"bg-white text-gray-900\"}`} onClick={e => e.stopPropagation()}>\n        <div className={`flex items-center justify-between p-5 border-b ${darkMode ? \"border-gray-700\" : \"border-gray-200\"}`}>\n          <h2 className=\"font-semibold\">Settings</h2>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">âœ•</button>\n        </div>\n        <div className=\"p-5 space-y-5\">\n          <div>\n            <div className=\"text-sm font-medium mb-3\">ðŸ‘¤ Profile Information</div>\n            <div className=\"grid grid-cols-2 gap-3 mb-2\">\n              <div><label className=\"text-xs text-gray-500 mb-1 block\">Name</label><input readOnly value={user.name} className={`w-full border rounded-lg px-3 py-2 text-sm ${darkMode ? \"bg-gray-700 border-gray-600 text-white\" : \"bg-gray-50 border-gray-200\"}`} /></div>\n              <div><label className=\"text-xs text-gray-500 mb-1 block\">Role</label><input readOnly value={user.role} className={`w-full border rounded-lg px-3 py-2 text-sm ${darkMode ? \"bg-gray-700 border-gray-600 text-white\" : \"bg-gray-50 border-gray-200\"}`} /></div>\n            </div>\n            <p className=\"text-xs text-gray-400\">Profile information is managed by your organisation administrator.</p>\n          </div>\n          <div>\n            <div className=\"text-sm font-medium mb-3\">ðŸ”” Notification Preferences</div>\n            {[[\"Email Notifications\",\"Receive updates via email\"],[\"In-App Notifications\",\"Show notifications within the app\"]].map(([l,d]) => (\n              <div key={l} className=\"flex items-center justify-between mb-3\">\n                <div><div className=\"text-sm\">{l}</div><div className=\"text-xs text-gray-400\">{d}</div></div>\n                <button className=\"w-10 h-5 bg-amber-500 rounded-full relative\"><span className=\"absolute right-0.5 top-0.5 w-4 h-4 bg-white rounded-full\" /></button>\n              </div>\n            ))}\n          </div>\n          <div>\n            <div className=\"text-sm font-medium mb-3\">ðŸŽ¨ Interface Preferences</div>\n            <div className=\"flex items-center justify-between\">\n              <div><div className=\"text-sm\">Dark Mode</div><div className=\"text-xs text-gray-400\">Use dark theme throughout the app</div></div>\n              <button onClick={toggleDarkMode} className={`w-10 h-5 rounded-full relative transition-colors ${darkMode ? \"bg-amber-500\" : \"bg-gray-300\"}`}><span className={`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-all ${darkMode ? \"right-0.5\" : \"left-0.5\"}`} /></button>\n            </div>\n          </div>\n        </div>\n        <div className=\"p-5 pt-0\"><button onClick={onLogout} className=\"w-full bg-red-500 text-white py-2.5 rounded-lg text-sm font-medium hover:bg-red-600\">ðŸšª Log Out</button></div>\n      </div>\n    </div>\n  );\n}\n\nfunction MessageListItem({ message, selected, onClick, darkMode }) {\n  const assignee = getUserById(message.assignedTo);\n  return (\n    <div onClick={onClick} className={`p-3 border-b cursor-pointer transition-colors relative ${selected ? (darkMode ? \"bg-amber-900/30 border-l-2 border-l-amber-500\" : \"bg-amber-50 border-l-2 border-l-amber-500\") : (darkMode ? \"hover:bg-gray-800 border-gray-700\" : \"hover:bg-gray-50 border-gray-100\")}`}>\n      {/* G10: needs review flag */}\n      {message.needsReview && <span className={`absolute top-2 right-2 text-xs px-1.5 py-0.5 rounded-full font-medium ${darkMode ? \"bg-amber-900/50 text-amber-300 border border-amber-700\" : \"bg-amber-100 text-amber-700\"}`}>ðŸ‘ Review</span>}\n      <div className=\"flex items-start gap-2\">\n        <span className=\"text-base mt-0.5\">{getChannelIcon(message.channel)}</span>\n        <div className=\"flex-1 min-w-0 pr-16\">\n          <div className=\"flex items-center justify-between mb-0.5\">\n            <span className={`text-sm font-medium truncate ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{message.from}</span>\n            <span className={`text-xs flex-shrink-0 ml-2 ${darkMode ? \"text-gray-400\" : \"text-gray-400\"}`}>{message.date}</span>\n          </div>\n          <div className={`text-xs font-medium mb-1 truncate ${darkMode ? \"text-gray-300\" : \"text-gray-700\"}`}>{message.subject}</div>\n          <div className={`text-xs mb-2 line-clamp-2 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>{message.body}</div>\n          <div className=\"flex flex-wrap items-center gap-1\">\n            <PriorityBadge message={message} />\n            <span className={`text-xs px-2 py-0.5 rounded-full ${getStatusColor(message.status)}`}>{message.status}</span>\n            <ConfidenceBadge message={message} />\n            <span className={`text-xs px-2 py-0.5 rounded-full ${darkMode ? \"bg-gray-700 text-gray-300\" : \"bg-gray-100 text-gray-600\"}`}>{message.department.toLowerCase()}</span>\n            {assignee && <span className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-400\"}`}>â†’ {assignee.name}</span>}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction MessageDetail({ message, onClose, isManager, onUpdate, currentUser, darkMode }) {\n  const [note, setNote] = useState(\"\");\n  const [localMsg, setLocalMsg] = useState(message);\n  const [confirm, setConfirm] = useState(null);\n  const [showLog, setShowLog] = useState(false);\n\n  useEffect(() => { setLocalMsg(message); }, [message]);\n\n  const inputCls = `w-full border rounded-lg px-3 py-2 text-sm ${darkMode ? \"bg-gray-700 border-gray-600 text-white\" : \"bg-gray-50 border-gray-200 text-gray-900\"}`;\n\n  // G9 + G6: apply change with audit log\n  const applyChange = (field, val) => {\n    const entry = { field, from: String(field === \"assignedTo\" ? getUserById(localMsg[field])?.name : localMsg[field]), to: String(field === \"assignedTo\" ? getUserById(+val)?.name : val), user: currentUser.name, time: new Date().toLocaleTimeString() };\n    const updated = { ...localMsg, [field]: field === \"assignedTo\" ? +val : val, changeLog: [...(localMsg.changeLog || []), entry], needsReview: false };\n    setLocalMsg(updated);\n    onUpdate(updated);\n    setConfirm(null);\n  };\n\n  // G16: high-impact changes need confirmation\n  const stageChange = (field, val) => {\n    const highImpact = field === \"assignedTo\" || (field === \"status\" && val === \"resolved\") || (field === \"priority\" && val === \"Urgent\");\n    if (highImpact) {\n      const label = field === \"assignedTo\" ? `reassign to ${getUserById(+val)?.name}` : field === \"status\" ? `mark as ${val}` : `change priority to ${val}`;\n      setConfirm({ field, val, label });\n    } else {\n      applyChange(field, val);\n    }\n  };\n\n  const addNote = () => {\n    if (!note.trim()) return;\n    const updated = { ...localMsg, internalNotes: [...localMsg.internalNotes, { text: note, author: currentUser.name, time: new Date().toLocaleTimeString() }] };\n    setLocalMsg(updated); onUpdate(updated); setNote(\"\");\n  };\n\n  return (\n    <div className={`flex flex-col h-full border-l ${darkMode ? \"bg-gray-800 text-white border-gray-700\" : \"bg-white text-gray-900 border-gray-200\"}`}>\n      {confirm && <ConfirmDialog title=\"Confirm Change\" message={`You are about to ${confirm.label}. This will be recorded in the change history. Continue?`} onConfirm={() => applyChange(confirm.field, confirm.val)} onCancel={() => setConfirm(null)} darkMode={darkMode} />}\n      {onClose && (\n        <div className={`flex items-center justify-between p-3 border-b ${darkMode ? \"border-gray-700\" : \"border-gray-200\"}`}>\n          <span className={`font-medium text-sm ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Message Details</span>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 text-lg leading-none\">âœ•</button>\n        </div>\n      )}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        <div>\n          <h2 className={`text-base font-semibold mb-1 ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{localMsg.subject}</h2>\n          <div className={`flex items-center gap-2 text-xs flex-wrap ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>\n            <span>From: <strong>{localMsg.from}</strong></span><span>Â·</span><span>{localMsg.date}</span><span>Â·</span><span>{getChannelIcon(localMsg.channel)} {localMsg.channel}</span>\n          </div>\n        </div>\n\n        {/* G2: data quality warning */}\n        <DataWarningBanner message={localMsg} darkMode={darkMode} />\n\n        <div className=\"flex flex-wrap gap-2\">\n          <PriorityBadge message={localMsg} />\n          <ConfidenceBadge message={localMsg} />\n          <span className={`text-xs px-2 py-0.5 rounded-full ${getStatusColor(localMsg.status)}`}>{localMsg.status}</span>\n          {/* G10: review flag in detail */}\n          {localMsg.needsReview && <span className={`text-xs px-2 py-0.5 rounded-full border ${darkMode ? \"bg-amber-900/30 border-amber-700 text-amber-300\" : \"bg-amber-50 border-amber-200 text-amber-700\"}`}>ðŸ‘ Needs Human Review</span>}\n        </div>\n\n        <div className={`rounded-lg p-3 text-sm leading-relaxed ${darkMode ? \"bg-gray-700/50 text-gray-200\" : \"bg-gray-50 text-gray-700\"}`}>{localMsg.body}</div>\n\n        {isManager && (\n          <div className=\"space-y-3\">\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div><label className={`text-xs mb-1 block ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Status</label><select value={localMsg.status} onChange={e => stageChange(\"status\", e.target.value)} className={inputCls}>{[\"pending\",\"assigned\",\"in-process\",\"resolved\"].map(s => <option key={s}>{s}</option>)}</select></div>\n              <div><label className={`text-xs mb-1 block ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Priority</label><select value={localMsg.priority} onChange={e => stageChange(\"priority\", e.target.value)} className={inputCls}>{[\"Urgent\",\"Medium\",\"Low\"].map(p => <option key={p}>{p}</option>)}</select></div>\n            </div>\n            <div><label className={`text-xs mb-1 block ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Assign To</label><select value={localMsg.assignedTo} onChange={e => stageChange(\"assignedTo\", e.target.value)} className={inputCls}>{USERS.filter(u => u.role === \"Employee\").map(u => <option key={u.id} value={u.id}>{u.name}</option>)}</select></div>\n            <div><label className={`text-xs mb-1 block ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Department</label><select value={localMsg.department} onChange={e => stageChange(\"department\", e.target.value)} className={inputCls}>{[\"Sales\",\"Support\",\"Marketing\",\"Hr\",\"Finance\"].map(d => <option key={d}>{d}</option>)}</select></div>\n          </div>\n        )}\n\n        <div><label className={`text-xs mb-1 block ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Contact Info</label><input readOnly value={localMsg.contactInfo} className={inputCls} /></div>\n\n        <div>\n          <div className={`text-xs font-medium mb-2 ${darkMode ? \"text-gray-300\" : \"text-gray-600\"}`}>Internal Notes</div>\n          {localMsg.internalNotes.length === 0 && <p className={`text-xs italic ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>No notes yet.</p>}\n          {localMsg.internalNotes.map((n, i) => (\n            <div key={i} className={`rounded-lg p-2.5 mb-2 text-xs ${darkMode ? \"bg-gray-700/50\" : \"bg-yellow-50 border border-yellow-100\"}`}>\n              <div className={`font-medium mb-0.5 ${darkMode ? \"text-gray-300\" : \"text-gray-700\"}`}>{n.author} Â· {n.time}</div>\n              <div className={darkMode ? \"text-gray-400\" : \"text-gray-600\"}>{n.text}</div>\n            </div>\n          ))}\n          <div className=\"flex gap-2 mt-2\">\n            <textarea value={note} onChange={e => setNote(e.target.value)} rows={2} placeholder=\"Add internal note...\" className={`flex-1 ${inputCls} resize-none`} />\n            <button onClick={addNote} className=\"bg-amber-500 text-white px-3 rounded-lg text-xs font-medium hover:bg-amber-600 flex-shrink-0\">Add</button>\n          </div>\n        </div>\n\n        {/* G6: Audit log */}\n        <div>\n          <button onClick={() => setShowLog(s => !s)} className={`text-xs font-medium flex items-center gap-1 mb-2 ${darkMode ? \"text-gray-400 hover:text-gray-300\" : \"text-gray-500 hover:text-gray-700\"}`}>\n            ðŸ“‹ Change History {localMsg.changeLog?.length > 0 && `(${localMsg.changeLog.length})`} {showLog ? \"â–²\" : \"â–¼\"}\n          </button>\n          {showLog && (\n            <div className=\"space-y-1\">\n              {(!localMsg.changeLog || localMsg.changeLog.length === 0) && <p className={`text-xs italic ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>No changes recorded yet.</p>}\n              {localMsg.changeLog?.map((e, i) => (\n                <div key={i} className={`text-xs flex items-start gap-2 py-1 border-b ${darkMode ? \"border-gray-700/50 text-gray-400\" : \"border-gray-50 text-gray-500\"}`}>\n                  <span className=\"flex-shrink-0\">ðŸ“</span>\n                  <span><strong className={darkMode ? \"text-gray-300\" : \"text-gray-600\"}>{e.user}</strong> changed <em>{e.field}</em>: <strong>{e.from}</strong> â†’ <strong>{e.to}</strong> Â· {e.time}</span>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction MessagesView({ isManager, currentUser, darkMode }) {\n  const { messages, updateMessage } = useContext(AppContext);\n  const [selected, setSelected] = useState(null);\n  const [search, setSearch] = useState(\"\");\n  const [sort, setSort] = useState(\"Most Recent\");\n  const [showDetail, setShowDetail] = useState(false);\n  const [dismissed, setDismissed] = useState([]);\n  const [showCapability, setShowCapability] = useState(true);\n\n  const filtered = messages.filter(m =>\n    m.from.toLowerCase().includes(search.toLowerCase()) ||\n    m.subject.toLowerCase().includes(search.toLowerCase()) ||\n    m.body.toLowerCase().includes(search.toLowerCase())\n  );\n  const sorted = [...filtered].sort((a, b) => {\n    if (sort === \"Priority\") { const o = { Urgent: 0, Medium: 1, Low: 2 }; return o[a.priority] - o[b.priority]; }\n    if (sort === \"Needs Review\") return (b.needsReview ? 1 : 0) - (a.needsReview ? 1 : 0);\n    return b.id - a.id;\n  });\n  const selectedMsg = selected ? messages.find(m => m.id === selected) : null;\n\n  return (\n    <div className={`flex flex-col flex-1 overflow-hidden ${darkMode ? \"bg-gray-900\" : \"bg-gray-50\"}`}>\n      {showCapability && <CapabilityBanner role={currentUser.role} onDismiss={() => setShowCapability(false)} darkMode={darkMode} />}\n      {isManager && <UrgentAlert messages={messages} dismissed={dismissed} onDismiss={id => setDismissed(d => [...d, id])} darkMode={darkMode} />}\n      <div className={`p-3 border-b flex items-center gap-2 mt-2 ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-200\"}`}>\n        <div className=\"flex-1 relative\">\n          <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm\">ðŸ”</span>\n          <input value={search} onChange={e => setSearch(e.target.value)} placeholder=\"Search messages...\" className={`w-full pl-9 pr-3 py-2 text-sm border rounded-lg ${darkMode ? \"bg-gray-700 border-gray-600 text-white placeholder-gray-400\" : \"bg-gray-50 border-gray-200 text-gray-900\"}`} />\n        </div>\n        <button className={`text-xs px-3 py-2 border rounded-lg ${darkMode ? \"border-gray-600 text-gray-300 hover:bg-gray-700\" : \"border-gray-200 text-gray-600 hover:bg-gray-100\"}`}>âš™ Filters</button>\n      </div>\n      <div className=\"flex flex-1 overflow-hidden\">\n        <div className={`flex flex-col ${showDetail ? \"hidden sm:flex sm:w-80 lg:w-96\" : \"flex-1 sm:w-80 lg:w-96\"} border-r overflow-hidden ${darkMode ? \"border-gray-700\" : \"border-gray-200\"}`}>\n          <div className={`flex items-center justify-between px-3 py-2 border-b ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`}>\n            <span className={`text-sm font-medium ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Messages <span className={`text-xs font-normal ${darkMode ? \"text-gray-400\" : \"text-gray-400\"}`}>{filtered.length} total</span></span>\n            <select value={sort} onChange={e => setSort(e.target.value)} className={`text-xs border rounded-lg px-2 py-1 ${darkMode ? \"bg-gray-700 border-gray-600 text-white\" : \"bg-white border-gray-200 text-gray-700\"}`}>\n              <option>Most Recent</option><option>Priority</option><option>Needs Review</option>\n            </select>\n          </div>\n          <div className=\"flex-1 overflow-y-auto\">\n            {sorted.map(m => <MessageListItem key={m.id} message={m} selected={selected === m.id} darkMode={darkMode} onClick={() => { setSelected(m.id); setShowDetail(true); }} />)}\n          </div>\n        </div>\n        <div className={`flex-1 overflow-hidden ${!showDetail ? \"hidden sm:flex sm:flex-col\" : \"flex flex-col\"}`}>\n          {selectedMsg ? (\n            <MessageDetail key={selectedMsg.id} message={selectedMsg} isManager={isManager} currentUser={currentUser} darkMode={darkMode} onClose={() => setShowDetail(false)} onUpdate={updateMessage} />\n          ) : (\n            <div className={`flex-1 flex items-center justify-center flex-col gap-3 ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>\n              <span className=\"text-5xl\">ðŸ’¬</span><span className=\"text-sm\">Select a message to view details</span>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction StatCard({ icon, value, label, sub, subColor, darkMode }) {\n  return (\n    <div className={`rounded-xl border p-4 ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`}>\n      <div className=\"flex items-center justify-between mb-2\"><span className=\"text-xl\">{icon}</span>{sub && <span className={`text-xs font-medium ${subColor || \"text-gray-500\"}`}>{sub}</span>}</div>\n      <div className={`text-2xl font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{value}</div>\n      <div className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>{label}</div>\n    </div>\n  );\n}\n\nfunction MiniBar({ label, count, total, color, icon, darkMode }) {\n  const pct = total ? (count / total) * 100 : 0;\n  return (\n    <div className=\"flex items-center gap-2 mb-2\">\n      {icon && <span className=\"text-xs w-4\">{icon}</span>}\n      <span className={`text-xs w-20 flex-shrink-0 ${darkMode ? \"text-gray-300\" : \"text-gray-600\"}`}>{label}</span>\n      <div className={`flex-1 rounded-full h-1.5 ${darkMode ? \"bg-gray-700\" : \"bg-gray-100\"}`}><div className={`h-1.5 rounded-full ${color}`} style={{ width: `${pct}%` }} /></div>\n      <span className={`text-xs w-4 text-right ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>{count}</span>\n    </div>\n  );\n}\n\nconst AI_INSIGHTS_DATA = [\n  { id: 1, type: \"suggestion\", badge: \"AI Suggestion\", badgeColor: \"bg-amber-100 text-amber-700 border-amber-200\", time: \"Just now\", title: \"Potential Service Outage\", body: 'Detected 5 similar inquiries regarding \"login issues\" in the last 30 minutes. Suggesting high priority for task T-1021.', actionable: true, applied: false },\n  { id: 2, type: \"digest\", badge: \"AI Digest\", badgeColor: \"bg-gray-100 text-gray-600 border-gray-200\", time: \"1h ago\", title: \"Daily Communication Summary\", body: \"Total 42 incoming communications. Top concerns: Billing (45%), Technical (30%), General (25%).\", actionable: false, applied: false },\n  { id: 3, type: \"suggestion\", badge: \"AI Suggestion\", badgeColor: \"bg-amber-100 text-amber-700 border-amber-200\", time: \"2h ago\", title: \"Recurring Billing Complaint\", body: 'Invoice discrepancy pattern detected â€” 3 contacts reported mismatched amounts in the past 24 hours. Consider escalating to Finance lead.', actionable: true, applied: false },\n  { id: 4, type: \"trend\", badge: \"AI Trend\", badgeColor: \"bg-blue-100 text-blue-600 border-blue-200\", time: \"3h ago\", title: \"Support Volume Spike\", body: \"Support channel volume is 40% above the 7-day average. Password reset requests account for most of the increase.\", actionable: false, applied: false },\n  { id: 5, type: \"suggestion\", badge: \"AI Suggestion\", badgeColor: \"bg-amber-100 text-amber-700 border-amber-200\", time: \"Yesterday\", title: \"Auto-Route Partnership Inquiries\", body: \"3 recent social media partnership messages were manually rerouted from Support to Marketing. Suggesting a new routing rule for messages containing 'partnership' or 'affiliate'.\", actionable: true, applied: false },\n];\n\n// Trend chart using SVG\nfunction TrendChart({ data, darkMode, color = \"#16a34a\" }) {\n  const w = 600, h = 160, pad = 20;\n  const max = Math.max(...data.map(d => d.value), 1);\n  const min = Math.min(...data.map(d => d.value), 0);\n  const range = max - min || 1;\n  const points = data.map((d, i) => {\n    const x = pad + (i / (data.length - 1)) * (w - pad * 2);\n    const y = h - pad - ((d.value - min) / range) * (h - pad * 2);\n    return { x, y, label: d.label };\n  });\n  const pathD = points.map((p, i) => `${i === 0 ? \"M\" : \"L\"}${p.x},${p.y}`).join(\" \");\n  const areaD = pathD + ` L${points[points.length - 1].x},${h - pad} L${points[0].x},${h - pad} Z`;\n  return (\n    <svg viewBox={`0 0 ${w} ${h + 20}`} className=\"w-full\" style={{ maxHeight: 220 }}>\n      <defs>\n        <linearGradient id=\"trendFill\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n          <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.15\" />\n          <stop offset=\"100%\" stopColor={color} stopOpacity=\"0.01\" />\n        </linearGradient>\n      </defs>\n      <path d={areaD} fill=\"url(#trendFill)\" />\n      <path d={pathD} fill=\"none\" stroke={color} strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      {points.map((p, i) => (\n        <g key={i}>\n          <circle cx={p.x} cy={p.y} r=\"4\" fill={color} />\n          <circle cx={p.x} cy={p.y} r=\"2\" fill=\"white\" />\n          <text x={p.x} y={h + 12} textAnchor=\"middle\" className={`text-xs ${darkMode ? \"fill-gray-400\" : \"fill-gray-500\"}`} style={{ fontSize: 11 }}>{p.label}</text>\n        </g>\n      ))}\n    </svg>\n  );\n}\n\nfunction AIPerformanceInsights({ darkMode, scopeMessages, allMessages, currentUser }) {\n  const [expanded, setExpanded] = useState(true);\n  const [trendMetric, setTrendMetric] = useState(\"Volume\");\n  const [chartType, setChartType] = useState(\"line\");\n\n  const msgs = scopeMessages;\n  const total = msgs.length;\n  const resolved = msgs.filter(m => m.status === \"resolved\").length;\n  const urgent = msgs.filter(m => m.priority === \"Urgent\").length;\n  const lowConf = msgs.filter(m => m.confidence === \"Low Confidence\").length;\n  const resolutionRate = total > 0 ? Math.round((resolved / total) * 100) : 0;\n  const urgentRatio = total > 0 ? Math.round((urgent / total) * 100) : 0;\n  const confOverrides = total > 0 ? Math.round((lowConf / total) * 100) : 0;\n  const escalationRate = total > 0 ? Math.round((urgent / total) * 100 * 0.55) : 0;\n\n  // Pattern detection\n  const patterns = [];\n  if (escalationRate > 15) patterns.push({ icon: \"âš¡\", label: \"Escalation Frequency Above Average\", color: \"text-red-600 bg-red-50 border-red-200\" });\n  if (lowConf > 0) patterns.push({ icon: \"âš ï¸\", label: \"Low Confidence Classifications Detected\", color: \"text-amber-600 bg-amber-50 border-amber-200\" });\n  if (urgentRatio > 25) patterns.push({ icon: \"ðŸ”¥\", label: \"High Urgent Message Ratio\", color: \"text-orange-600 bg-orange-50 border-orange-200\" });\n  const pendingCount = msgs.filter(m => m.status === \"pending\").length;\n  if (pendingCount > 2) patterns.push({ icon: \"ðŸ“¥\", label: \"Pending Queue Growing\", color: \"text-blue-600 bg-blue-50 border-blue-200\" });\n\n  // Trend data (simulated weekly)\n  const trendData = {\n    Volume: [\n      { label: \"Mon\", value: 8 }, { label: \"Tue\", value: 12 }, { label: \"Wed\", value: 6 },\n      { label: \"Thu\", value: 15 }, { label: \"Fri\", value: 11 }, { label: \"Sat\", value: 4 }, { label: \"Sun\", value: 3 }\n    ],\n    Response: [\n      { label: \"Mon\", value: 120 }, { label: \"Tue\", value: 148 }, { label: \"Wed\", value: 95 },\n      { label: \"Thu\", value: 160 }, { label: \"Fri\", value: 135 }, { label: \"Sat\", value: 80 }, { label: \"Sun\", value: 70 }\n    ],\n    Priority: [\n      { label: \"Mon\", value: 3 }, { label: \"Tue\", value: 5 }, { label: \"Wed\", value: 2 },\n      { label: \"Thu\", value: 6 }, { label: \"Fri\", value: 4 }, { label: \"Sat\", value: 1 }, { label: \"Sun\", value: 2 }\n    ]\n  };\n  const trendColors = { Volume: \"#16a34a\", Response: \"#2563eb\", Priority: \"#dc2626\" };\n\n  const card = `rounded-xl border ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`;\n  const metricCard = `rounded-lg border p-3 ${darkMode ? \"bg-gray-700/50 border-gray-600\" : \"bg-white border-gray-200\"}`;\n\n  // AI Analysis sentence\n  const analysisText = currentUser.role === \"Employee\"\n    ? `You've handled ${total} message${total !== 1 ? \"s\" : \"\"} in the past 30 days, with a ${resolutionRate}% resolution rate. ${resolutionRate >= 70 ? \"Your response time is on par with team average.\" : resolutionRate >= 50 ? \"There's room to improve your resolution rate.\" : \"Consider prioritising pending items to improve throughput.\"}`\n    : `Your team has processed ${allMessages.length} messages in the past 30 days, with a ${resolutionRate}% resolution rate and ${urgentRatio}% urgent ratio. ${resolutionRate >= 70 ? \"Team performance is strong.\" : \"Resolution rate could be improved with better routing.\"}`;\n\n  return (\n    <div className={`${card} p-4 mb-4`}>\n      <div className=\"flex items-center justify-between mb-1 cursor-pointer\" onClick={() => setExpanded(e => !e)}>\n        <span className={`text-sm font-semibold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>AI Performance Insights</span>\n        <span className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>{expanded ? \"â–²\" : \"â–¼\"}</span>\n      </div>\n      {expanded && (\n        <div>\n          <div className=\"flex items-center gap-2 mb-4\">\n            <span className=\"text-lg\">âœ¨</span>\n            <span className={`text-sm font-semibold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>AI Performance Insights</span>\n          </div>\n          <p className={`text-xs mb-4 italic ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Insights are generated based on historical activity and trends.</p>\n\n          {/* Metric cards - row 1 */}\n          <div className=\"grid grid-cols-3 gap-3 mb-3\">\n            <div className={metricCard}>\n              <div className={`text-xs mb-1 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Avg Response Time</div>\n              <div className={`text-xl font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>148m</div>\n              <div className=\"text-xs text-red-500 flex items-center gap-0.5\">â†˜ 12%</div>\n            </div>\n            <div className={metricCard}>\n              <div className={`text-xs mb-1 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Resolution Rate</div>\n              <div className={`text-xl font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{resolutionRate}%</div>\n              <div className=\"text-xs text-red-500 flex items-center gap-0.5\">â†˜ 8%</div>\n            </div>\n            <div className={metricCard}>\n              <div className={`text-xs mb-1 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Escalation Rate</div>\n              <div className={`text-xl font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{escalationRate}%</div>\n              <div className=\"text-xs text-red-500 flex items-center gap-0.5\">â†˜ 3%</div>\n            </div>\n          </div>\n\n          {/* Metric cards - row 2 */}\n          <div className=\"grid grid-cols-3 gap-3 mb-4\">\n            <div className={metricCard}>\n              <div className={`text-xs mb-1 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Messages (30d)</div>\n              <div className={`text-xl font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{total}</div>\n              <div className=\"text-xs text-green-500 flex items-center gap-0.5\">â†— 15%</div>\n            </div>\n            <div className={metricCard}>\n              <div className={`text-xs mb-1 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Urgent Ratio</div>\n              <div className={`text-xl font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{urgentRatio}%</div>\n              <div className=\"text-xs text-red-500 flex items-center gap-0.5\">â†˜ 5%</div>\n            </div>\n            <div className={metricCard}>\n              <div className={`text-xs mb-1 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Confidence Overrides</div>\n              <div className={`text-xl font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{confOverrides}%</div>\n              <div className=\"text-xs text-red-500 flex items-center gap-0.5\">â†˜ 2%</div>\n            </div>\n          </div>\n\n          {/* AI Analysis banner */}\n          <div className={`rounded-lg p-3 mb-4 flex items-start gap-3 ${darkMode ? \"bg-blue-900/20 border border-blue-800/40\" : \"bg-blue-50 border border-blue-200\"}`}>\n            <span className=\"text-lg flex-shrink-0 mt-0.5\">âœ¨</span>\n            <div>\n              <div className={`text-xs font-semibold mb-0.5 ${darkMode ? \"text-blue-300\" : \"text-blue-800\"}`}>AI Analysis</div>\n              <p className={`text-xs leading-relaxed ${darkMode ? \"text-blue-200\" : \"text-blue-700\"}`}>{analysisText}</p>\n            </div>\n          </div>\n\n          {/* Pattern Detection */}\n          <div className=\"mb-3\">\n            <div className={`text-sm font-semibold mb-2 ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Pattern Detection</div>\n            <div className=\"flex flex-wrap gap-2\">\n              {patterns.length > 0 ? patterns.map((p, i) => (\n                <span key={i} className={`inline-flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-full border font-medium ${darkMode ? \"bg-gray-700 border-gray-600 text-gray-300\" : p.color}`}>\n                  {p.icon} {p.label}\n                </span>\n              )) : (\n                <span className={`text-xs italic ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>No unusual patterns detected.</span>\n              )}\n            </div>\n          </div>\n\n          {/* Human-in-the-Loop disclaimer */}\n          <div className={`rounded-lg px-3 py-2 mb-4 text-xs ${darkMode ? \"bg-amber-900/20 border border-amber-800/40 text-amber-300\" : \"bg-amber-50 border border-amber-200 text-amber-800\"}`}>\n            <strong>Human-in-the-Loop:</strong> AI insights are advisory and based on historical patterns. Final decisions remain with the user.\n          </div>\n\n          {/* Trend Analysis */}\n          <div className={`rounded-lg border p-4 ${darkMode ? \"bg-gray-700/30 border-gray-600\" : \"bg-white border-gray-200\"}`}>\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className={`text-sm font-semibold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Trend Analysis</span>\n              <div className=\"flex items-center gap-1\">\n                {[\"Volume\", \"Response\", \"Priority\"].map(m => (\n                  <button key={m} onClick={() => setTrendMetric(m)} className={`text-xs px-2.5 py-1 rounded-lg font-medium transition-colors ${trendMetric === m ? (darkMode ? \"bg-gray-600 text-white\" : \"bg-gray-200 text-gray-800\") : (darkMode ? \"text-gray-400 hover:bg-gray-600\" : \"text-gray-500 hover:bg-gray-100\")}`}>{m}</button>\n                ))}\n                <div className={`flex items-center gap-0.5 ml-1 border rounded-lg overflow-hidden ${darkMode ? \"border-gray-600\" : \"border-gray-200\"}`}>\n                  <button onClick={() => setChartType(\"bar\")} className={`p-1.5 text-xs ${chartType === \"bar\" ? (darkMode ? \"bg-gray-600 text-white\" : \"bg-gray-200 text-gray-700\") : (darkMode ? \"text-gray-400\" : \"text-gray-500\")}`}>â–¥</button>\n                  <button onClick={() => setChartType(\"line\")} className={`p-1.5 text-xs ${chartType === \"line\" ? (darkMode ? \"bg-gray-600 text-white\" : \"bg-gray-200 text-gray-700\") : (darkMode ? \"text-gray-400\" : \"text-gray-500\")}`}>â†—</button>\n                </div>\n              </div>\n            </div>\n            {chartType === \"line\" ? (\n              <TrendChart data={trendData[trendMetric]} darkMode={darkMode} color={trendColors[trendMetric]} />\n            ) : (\n              <div className=\"flex items-end gap-2 h-40 px-2\">\n                {trendData[trendMetric].map((d, i) => {\n                  const maxVal = Math.max(...trendData[trendMetric].map(x => x.value), 1);\n                  const pct = (d.value / maxVal) * 100;\n                  return (\n                    <div key={i} className=\"flex-1 flex flex-col items-center gap-1\">\n                      <div className=\"w-full flex items-end justify-center\" style={{ height: 120 }}>\n                        <div className=\"w-full max-w-8 rounded-t-md transition-all\" style={{ height: `${pct}%`, backgroundColor: trendColors[trendMetric], opacity: 0.7 }} />\n                      </div>\n                      <span className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`} style={{ fontSize: 10 }}>{d.label}</span>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction RecentTasksTable({ taskMessages, darkMode, onViewAll }) {\n  const recent = [...taskMessages].sort((a, b) => b.id - a.id).slice(0, 5);\n  const thCls = `text-left pb-2 font-medium text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`;\n  const tdCls = `py-2.5 text-xs ${darkMode ? \"text-gray-300\" : \"text-gray-600\"}`;\n  return (\n    <div className={`rounded-xl border p-4 ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`}>\n      <div className=\"flex items-center justify-between mb-3\">\n        <span className={`text-sm font-semibold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Recent Tasks</span>\n        {onViewAll && <button onClick={onViewAll} className=\"text-xs text-amber-600 hover:text-amber-700 font-medium flex items-center gap-1\">View All â†—</button>}\n      </div>\n      {recent.length === 0 ? (\n        <div className={`text-center py-8 ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>\n          <span className=\"text-sm\">No recent tasks found.</span>\n        </div>\n      ) : (\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className={`border-b ${darkMode ? \"border-gray-700\" : \"border-gray-100\"}`}>\n                <th className={thCls}>ID</th>\n                <th className={thCls}>Title</th>\n                <th className={`${thCls} hidden sm:table-cell`}>Channel</th>\n                <th className={thCls}>Priority</th>\n                <th className={thCls}>Status</th>\n                <th className={`${thCls} hidden sm:table-cell`}>Owner</th>\n              </tr>\n            </thead>\n            <tbody>\n              {recent.map(m => {\n                const owner = getUserById(m.assignedTo);\n                return (\n                  <tr key={m.id} className={`border-b ${darkMode ? \"border-gray-700/50\" : \"border-gray-50\"}`}>\n                    <td className={`${tdCls} font-mono`}>T-{String(1000 + m.id)}</td>\n                    <td className={tdCls}>\n                      <div className={`font-medium truncate max-w-48 ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{m.subject}</div>\n                    </td>\n                    <td className={`${tdCls} hidden sm:table-cell`}>\n                      <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${darkMode ? \"bg-gray-700 text-gray-300\" : \"bg-gray-100 text-gray-600\"}`}>\n                        {getChannelIcon(m.channel)} {m.channel}\n                      </span>\n                    </td>\n                    <td className={tdCls}>\n                      <span className={`inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full border ${getPriorityColor(m.priority)}`}>\n                        {getPriorityIcon(m.priority)} {m.priority}\n                      </span>\n                    </td>\n                    <td className={tdCls}>\n                      <span className={`text-xs px-2 py-0.5 rounded-full capitalize ${getStatusColor(m.status)}`}>{m.status}</span>\n                    </td>\n                    <td className={`${tdCls} hidden sm:table-cell`}>\n                      {owner ? (\n                        <div className=\"flex items-center gap-1.5\">\n                          <Avatar name={owner.name} size=\"sm\" />\n                          <span className={`truncate max-w-20 ${darkMode ? \"text-gray-300\" : \"text-gray-700\"}`}>{owner.name.split(\" \")[0]}</span>\n                        </div>\n                      ) : <span className={darkMode ? \"text-gray-500\" : \"text-gray-400\"}>Unassigned</span>}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction AIInsightsPanel({ darkMode, messages }) {\n  const [insights, setInsights] = useState(AI_INSIGHTS_DATA);\n  const [dismissed, setDismissed] = useState([]);\n\n  const handleApply = (id) => {\n    setInsights(prev => prev.map(i => i.id === id ? { ...i, applied: true } : i));\n  };\n  const handleDismiss = (id) => {\n    setDismissed(prev => [...prev, id]);\n  };\n\n  const visible = insights.filter(i => !dismissed.includes(i.id));\n\n  // Derive a live pattern detection from actual messages\n  const urgentPending = messages.filter(m => m.priority === \"Urgent\" && m.status === \"pending\").length;\n  const lowConfCount = messages.filter(m => m.confidence === \"Low Confidence\").length;\n\n  return (\n    <div className={`rounded-xl border p-4 ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-amber-50/50 border-amber-100\"}`}>\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-lg\">ðŸ§ </span>\n          <span className={`text-sm font-semibold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>AI Insights</span>\n          <span className={`text-xs px-2 py-0.5 rounded-full ${darkMode ? \"bg-amber-900/40 text-amber-300\" : \"bg-amber-100 text-amber-700\"}`}>{visible.length} active</span>\n        </div>\n      </div>\n\n      {/* Live alerts derived from data */}\n      {urgentPending > 0 && (\n        <div className={`rounded-lg border p-3 mb-3 ${darkMode ? \"bg-red-900/20 border-red-800/40\" : \"bg-red-50 border-red-200\"}`}>\n          <div className=\"flex items-center gap-2 mb-1\">\n            <span className={`text-xs px-2 py-0.5 rounded-full border font-medium ${darkMode ? \"bg-red-900/40 text-red-300 border-red-700\" : \"bg-red-100 text-red-700 border-red-200\"}`}>ðŸš¨ Live Alert</span>\n            <span className={`text-xs ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>Now</span>\n          </div>\n          <div className={`text-sm font-medium mb-0.5 ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Urgent Messages Unassigned</div>\n          <div className={`text-xs leading-relaxed ${darkMode ? \"text-gray-400\" : \"text-gray-600\"}`}>{urgentPending} urgent message{urgentPending > 1 ? \"s are\" : \" is\"} still pending without action. Immediate attention recommended.</div>\n        </div>\n      )}\n\n      {lowConfCount > 0 && (\n        <div className={`rounded-lg border p-3 mb-3 ${darkMode ? \"bg-amber-900/20 border-amber-800/40\" : \"bg-amber-50 border-amber-200\"}`}>\n          <div className=\"flex items-center gap-2 mb-1\">\n            <span className={`text-xs px-2 py-0.5 rounded-full border font-medium ${darkMode ? \"bg-amber-900/40 text-amber-300 border-amber-700\" : \"bg-amber-100 text-amber-700 border-amber-200\"}`}>âš ï¸ Review Needed</span>\n            <span className={`text-xs ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>Ongoing</span>\n          </div>\n          <div className={`text-sm font-medium mb-0.5 ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Low Confidence Classifications</div>\n          <div className={`text-xs leading-relaxed ${darkMode ? \"text-gray-400\" : \"text-gray-600\"}`}>{lowConfCount} message{lowConfCount > 1 ? \"s have\" : \" has\"} low AI confidence. Human review is recommended to ensure correct routing.</div>\n        </div>\n      )}\n\n      {/* Static insight cards */}\n      <div className=\"space-y-3\">\n        {visible.map(insight => (\n          <div key={insight.id} className={`rounded-lg border p-3 transition-all ${insight.applied ? (darkMode ? \"bg-green-900/10 border-green-800/30\" : \"bg-green-50/50 border-green-200\") : (darkMode ? \"bg-gray-700/50 border-gray-600\" : \"bg-white border-gray-200\")}`}>\n            <div className=\"flex items-center gap-2 mb-1\">\n              <span className={`text-xs px-2 py-0.5 rounded-full border font-medium ${insight.applied ? (darkMode ? \"bg-green-900/40 text-green-300 border-green-700\" : \"bg-green-100 text-green-700 border-green-200\") : insight.badgeColor}`}>{insight.badge}</span>\n              <span className={`text-xs ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>{insight.time}</span>\n              {insight.applied && <span className={`text-xs font-medium ${darkMode ? \"text-green-400\" : \"text-green-600\"}`}>âœ“ Applied</span>}\n            </div>\n            <div className={`text-sm font-medium mb-0.5 ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{insight.title}</div>\n            <div className={`text-xs leading-relaxed mb-2 ${darkMode ? \"text-gray-400\" : \"text-gray-600\"}`}>{insight.body}</div>\n            {!insight.applied && (\n              <div className=\"flex items-center gap-2\">\n                {insight.actionable && (\n                  <button onClick={() => handleApply(insight.id)} className=\"bg-amber-500 text-white text-xs px-3 py-1.5 rounded-lg font-medium hover:bg-amber-600 transition-colors\">Apply</button>\n                )}\n                <button onClick={() => handleDismiss(insight.id)} className={`text-xs px-3 py-1.5 rounded-lg font-medium transition-colors ${darkMode ? \"text-gray-400 hover:bg-gray-600\" : \"text-gray-500 hover:bg-gray-100\"}`}>Dismiss</button>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {visible.length === 0 && (\n        <div className={`text-center py-6 ${darkMode ? \"text-gray-500\" : \"text-gray-400\"}`}>\n          <span className=\"text-2xl block mb-2\">âœ¨</span>\n          <span className=\"text-xs\">All caught up! No pending AI insights.</span>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ManagerDashboard({ currentUser, onUpload, darkMode }) {\n  const { messages } = useContext(AppContext);\n  const total = messages.length;\n  const urgent = messages.filter(m => m.priority === \"Urgent\").length;\n  const resolved = messages.filter(m => m.status === \"resolved\").length;\n  const needsReview = messages.filter(m => m.needsReview).length;\n  const byPriority = { Urgent: urgent, Medium: messages.filter(m => m.priority === \"Medium\").length, Low: messages.filter(m => m.priority === \"Low\").length };\n  const byDept = {}; messages.forEach(m => { byDept[m.department] = (byDept[m.department] || 0) + 1; });\n  const byChannel = {}; messages.forEach(m => { byChannel[m.channel] = (byChannel[m.channel] || 0) + 1; });\n  const byConf = { \"High Confidence\": 0, \"Medium Confidence\": 0, \"Low Confidence\": 0 }; messages.forEach(m => { byConf[m.confidence]++; });\n  const statusCounts = { pending: 0, assigned: 0, \"in-process\": 0, resolved: 0 }; messages.forEach(m => { statusCounts[m.status]++; });\n  const workload = {}; messages.forEach(m => { if (m.assignedTo) workload[m.assignedTo] = (workload[m.assignedTo] || 0) + 1; });\n  const card = `rounded-xl border p-4 ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`;\n  const sT = `text-sm font-semibold mb-3 ${darkMode ? \"text-white\" : \"text-gray-800\"}`;\n  return (\n    <div className={`flex-1 overflow-y-auto p-4 ${darkMode ? \"bg-gray-900\" : \"bg-gray-50\"}`}>\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div><h1 className={`text-lg font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{currentUser.role === \"Admin\" ? \"Admin\" : currentUser.role === \"Manager\" ? \"Manager\" : \"Team\"} Dashboard</h1><p className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Overview of team performance and message analytics</p></div>\n          <button onClick={onUpload} className=\"bg-amber-500 text-white text-xs px-4 py-2 rounded-lg hover:bg-amber-600 font-medium\">+ Upload Message</button>\n        </div>\n\n        {/* Row 1: Stat cards */}\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-4\">\n          <StatCard icon=\"ðŸ“Š\" value={total} label=\"Total Messages\" sub=\"+12%\" subColor=\"text-green-500\" darkMode={darkMode} />\n          <StatCard icon=\"âš ï¸\" value={messages.filter(m => m.status === \"pending\" || m.status === \"assigned\").length} label=\"Needs Attention\" sub={`${urgent} urgent`} subColor=\"text-red-500\" darkMode={darkMode} />\n          <StatCard icon=\"âœ…\" value={resolved} label=\"Resolved Today\" sub=\"16.7%\" subColor=\"text-green-500\" darkMode={darkMode} />\n          <StatCard icon=\"ðŸ‘\" value={needsReview} label=\"Needs Review\" sub=\"Low confidence\" subColor=\"text-amber-500\" darkMode={darkMode} />\n        </div>\n\n        {/* Row 2: Recent Tasks + AI Insights side by side */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4\">\n          <RecentTasksTable taskMessages={messages} darkMode={darkMode} />\n          <AIInsightsPanel darkMode={darkMode} messages={messages} />\n        </div>\n\n        {/* Row 3: AI Performance Insights (full width) */}\n        <AIPerformanceInsights darkMode={darkMode} scopeMessages={messages} allMessages={messages} currentUser={currentUser} />\n\n        {/* Row 4: Priority + Department side by side */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3\">\n          <div className={card}><div className={sT}>âš ï¸ Messages by Priority</div><MiniBar label=\"Urgent\" count={byPriority.Urgent} total={total} color=\"bg-red-500\" icon=\"ðŸ”´\" darkMode={darkMode} /><MiniBar label=\"Medium\" count={byPriority.Medium} total={total} color=\"bg-amber-500\" icon=\"ðŸŸ¡\" darkMode={darkMode} /><MiniBar label=\"Low\" count={byPriority.Low} total={total} color=\"bg-green-500\" icon=\"ðŸŸ¢\" darkMode={darkMode} /></div>\n          <div className={card}><div className={sT}>ðŸ“ˆ Messages by Department</div>{Object.entries(byDept).map(([d,c],i) => <MiniBar key={d} label={d} count={c} total={total} color={[\"bg-blue-500\",\"bg-orange-500\",\"bg-pink-500\",\"bg-purple-500\",\"bg-green-500\"][i%5]} darkMode={darkMode} />)}</div>\n        </div>\n\n        {/* Row 5: Confidence + Channel side by side */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3\">\n          <div className={card}><div className={sT}>â„¹ï¸ Messages by Confidence</div><MiniBar label=\"High\" count={byConf[\"High Confidence\"]} total={total} color=\"bg-green-500\" darkMode={darkMode} /><MiniBar label=\"Medium\" count={byConf[\"Medium Confidence\"]} total={total} color=\"bg-amber-500\" darkMode={darkMode} /><MiniBar label=\"Low\" count={byConf[\"Low Confidence\"]} total={total} color=\"bg-red-500\" darkMode={darkMode} /></div>\n          <div className={card}><div className={sT}>ðŸ“¡ Messages by Channel</div>{Object.entries(byChannel).map(([c,n],i) => <MiniBar key={c} label={c} count={n} total={total} color={[\"bg-blue-500\",\"bg-green-500\",\"bg-purple-500\",\"bg-amber-500\",\"bg-red-500\"][i%5]} darkMode={darkMode} />)}</div>\n        </div>\n\n        {/* Row 6: Status + Team Workload side by side */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3\">\n          <div className={card}><div className={sT}>Status Breakdown</div><div className=\"grid grid-cols-2 gap-3\">{Object.entries(statusCounts).map(([s,c]) => <div key={s} className={`rounded-lg p-3 ${getStatusColor(s)} bg-opacity-20`}><div className=\"text-xl font-bold\">{c}</div><div className=\"text-xs capitalize\">{s}</div></div>)}</div></div>\n          <div className={card}><div className={sT}>ðŸ‘¥ Team Workload</div><div className=\"grid grid-cols-2 gap-3\">{USERS.filter(u => u.role !== \"Admin\").map(u => <div key={u.id} className=\"flex items-center gap-2\"><Avatar name={u.name} size=\"sm\" /><div><div className={`text-xs font-medium ${darkMode ? \"text-white\" : \"text-gray-800\"}`}>{u.name}</div><div className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>{u.department}</div></div><span className={`ml-auto text-xs font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{workload[u.id] || 0}</span></div>)}</div></div>\n        </div>\n\n        {/* Row 7: Team Directory (full width) */}\n        <div className={card}><div className={sT}>Team Directory</div><div className=\"overflow-x-auto\"><table className=\"w-full text-xs\"><thead><tr className={`border-b ${darkMode ? \"border-gray-700 text-gray-400\" : \"border-gray-100 text-gray-500\"}`}><th className=\"text-left pb-2 font-medium\">Employee</th><th className=\"text-left pb-2 font-medium\">Department</th><th className=\"text-left pb-2 font-medium\">Role</th><th className=\"text-left pb-2 font-medium\">Messages</th><th className=\"text-left pb-2 font-medium\">Status</th></tr></thead><tbody>{USERS.map(u => <tr key={u.id} className={`border-b ${darkMode ? \"border-gray-700/50\" : \"border-gray-50\"}`}><td className=\"py-2 flex items-center gap-2\"><Avatar name={u.name} size=\"sm\" /><span className={darkMode ? \"text-white\" : \"text-gray-800\"}>{u.name}</span></td><td className={`py-2 ${darkMode ? \"text-gray-300\" : \"text-gray-600\"}`}>{u.department}</td><td className=\"py-2\">{u.role === \"Manager\" ? <span className=\"text-xs px-2 py-0.5 rounded border border-purple-300 text-purple-600\">Manager</span> : u.role === \"Admin\" ? <span className=\"text-xs px-2 py-0.5 rounded border border-red-300 text-red-600\">Admin</span> : <span className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Employee</span>}</td><td className={`py-2 ${darkMode ? \"text-gray-300\" : \"text-gray-600\"}`}>{workload[u.id] || 0}</td><td className=\"py-2\"><span className=\"flex items-center gap-1 text-green-600 text-xs\"><span className=\"w-1.5 h-1.5 bg-green-500 rounded-full\" />Active</span></td></tr>)}</tbody></table></div></div>\n      </div>\n    </div>\n  );\n}\n\nfunction EmployeeDashboard({ currentUser, darkMode }) {\n  const { messages } = useContext(AppContext);\n  const myMsgs = messages.filter(m => m.assignedTo === currentUser.id);\n  const stats = [{ icon: \"ðŸ“¬\", value: myMsgs.length, label: \"My Messages\" }, { icon: \"â³\", value: myMsgs.filter(m => m.status === \"pending\").length, label: \"Pending\" }, { icon: \"ðŸ”„\", value: myMsgs.filter(m => m.status === \"in-process\").length, label: \"In Process\" }, { icon: \"âœ…\", value: myMsgs.filter(m => m.status === \"resolved\").length, label: \"Resolved\" }];\n  return (\n    <div className={`flex-1 overflow-y-auto p-4 ${darkMode ? \"bg-gray-900\" : \"bg-gray-50\"}`}>\n      <div className=\"max-w-7xl mx-auto\">\n        <h1 className={`text-lg font-bold mb-1 ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>My Work Queue</h1>\n        <p className={`text-xs mb-4 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Messages assigned to {currentUser.name}</p>\n\n        {/* Row 1: Stat cards */}\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-4\">{stats.map(s => <StatCard key={s.label} icon={s.icon} value={s.value} label={s.label} darkMode={darkMode} />)}</div>\n\n        {/* Row 2: Recent Tasks + AI Insights side by side */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4\">\n          <RecentTasksTable taskMessages={myMsgs} darkMode={darkMode} />\n          <AIInsightsPanel darkMode={darkMode} messages={myMsgs} />\n        </div>\n\n        {/* Row 3: AI Performance Insights (full width) */}\n        <AIPerformanceInsights darkMode={darkMode} scopeMessages={myMsgs} allMessages={messages} currentUser={currentUser} />\n\n        {/* Row 4: Message list (full width) */}\n        <div className={`rounded-xl border ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`}>\n          {myMsgs.length === 0 ? <div className=\"p-8 text-center text-gray-400\">No messages assigned to you.</div>\n            : myMsgs.map((m, i) => <div key={m.id} className={`p-3 ${i < myMsgs.length - 1 ? `border-b ${darkMode ? \"border-gray-700\" : \"border-gray-50\"}` : \"\"}`}><div className=\"flex items-start gap-2\"><span className=\"text-base mt-0.5\">{getChannelIcon(m.channel)}</span><div className=\"flex-1 min-w-0\"><div className=\"flex items-center justify-between\"><span className={`text-sm font-medium ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{m.from}</span><span className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-400\"}`}>{m.date}</span></div><div className={`text-xs font-medium mb-1 ${darkMode ? \"text-gray-300\" : \"text-gray-700\"}`}>{m.subject}</div><div className={`text-xs mb-2 line-clamp-2 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>{m.body}</div><div className=\"flex flex-wrap gap-1\"><PriorityBadge message={m} /><span className={`text-xs px-2 py-0.5 rounded-full ${getStatusColor(m.status)}`}>{m.status}</span><ConfidenceBadge message={m} /></div></div></div></div>)}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction UploadModal({ onClose, onSubmit, currentUser, darkMode }) {\n  const [form, setForm] = useState({ channel: \"Email\", priority: \"Medium\", department: \"Sales\", assignedTo: 1, contactName: \"\", contactInfo: \"\", confidence: \"High Confidence\", subject: \"\", body: \"\" });\n  const h = (k, v) => setForm(f => ({ ...f, [k]: v }));\n  const inputCls = `w-full border rounded-lg px-3 py-2 text-sm ${darkMode ? \"bg-gray-700 border-gray-600 text-white\" : \"bg-white border-gray-200 text-gray-900\"}`;\n  const modal = `rounded-xl shadow-2xl w-full max-w-lg mx-4 ${darkMode ? \"bg-gray-800 text-white\" : \"bg-white text-gray-900\"}`;\n  const assignee = getUserById(form.assignedTo);\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\" onClick={onClose}>\n      <div className={modal} onClick={e => e.stopPropagation()}>\n        <div className={`flex items-center justify-between p-5 border-b ${darkMode ? \"border-gray-700\" : \"border-gray-200\"}`}><h2 className=\"font-semibold\">Upload Message</h2><button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">âœ•</button></div>\n        <div className=\"p-5 space-y-3 max-h-[70vh] overflow-y-auto\">\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div><label className=\"text-xs text-gray-500 mb-1 block\">Channel</label><select value={form.channel} onChange={e => h(\"channel\",e.target.value)} className={inputCls}>{[\"Email\",\"Phone\",\"Chat\",\"Social\",\"SMS\"].map(c => <option key={c}>{c}</option>)}</select></div>\n            <div><label className=\"text-xs text-gray-500 mb-1 block\">Priority</label><select value={form.priority} onChange={e => h(\"priority\",e.target.value)} className={inputCls}>{[\"Urgent\",\"Medium\",\"Low\"].map(p => <option key={p}>{p}</option>)}</select></div>\n          </div>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div><label className=\"text-xs text-gray-500 mb-1 block\">Department</label><select value={form.department} onChange={e => h(\"department\",e.target.value)} className={inputCls}>{[\"Sales\",\"Support\",\"Marketing\",\"Hr\",\"Finance\"].map(d => <option key={d}>{d}</option>)}</select></div>\n            <div><label className=\"text-xs text-gray-500 mb-1 block\">Assign To</label><select value={form.assignedTo} onChange={e => h(\"assignedTo\",+e.target.value)} className={inputCls}>{USERS.filter(u => u.role === \"Employee\").map(u => <option key={u.id} value={u.id}>{u.name}</option>)}</select></div>\n          </div>\n          {/* G16: assignment preview */}\n          {assignee && <div className={`text-xs p-2.5 rounded-lg flex items-start gap-2 ${darkMode ? \"bg-blue-900/20 border border-blue-700/40 text-blue-300\" : \"bg-blue-50 border border-blue-200 text-blue-700\"}`}>â„¹ï¸ This message will be sent to <strong>{assignee.name}</strong> ({assignee.department}) with <strong>{form.priority}</strong> priority.</div>}\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div><label className=\"text-xs text-gray-500 mb-1 block\">Contact Name</label><input value={form.contactName} onChange={e => h(\"contactName\",e.target.value)} className={inputCls} /></div>\n            <div><label className=\"text-xs text-gray-500 mb-1 block\">Contact Info</label><input value={form.contactInfo} onChange={e => h(\"contactInfo\",e.target.value)} placeholder=\"Email, phone, or handle\" className={inputCls} /></div>\n          </div>\n          <div><label className=\"text-xs text-gray-500 mb-1 block\">Confidence Level</label><select value={form.confidence} onChange={e => h(\"confidence\",e.target.value)} className={inputCls}>{[\"High Confidence\",\"Medium Confidence\",\"Low Confidence\"].map(c => <option key={c}>{c}</option>)}</select></div>\n          <div><label className=\"text-xs text-gray-500 mb-1 block\">Subject</label><input value={form.subject} onChange={e => h(\"subject\",e.target.value)} className={inputCls} /></div>\n          <div><label className=\"text-xs text-gray-500 mb-1 block\">Message Content</label><textarea value={form.body} onChange={e => h(\"body\",e.target.value)} rows={3} className={`${inputCls} resize-none`} /></div>\n        </div>\n        <div className=\"flex gap-3 p-5 pt-0\">\n          <button onClick={onClose} className={`flex-1 border rounded-lg py-2 text-sm ${darkMode ? \"border-gray-600 text-gray-300\" : \"border-gray-200 text-gray-600\"}`}>Cancel</button>\n          <button onClick={() => { onSubmit(form); onClose(); }} className=\"flex-1 bg-amber-500 text-white text-sm py-2 rounded-lg font-medium hover:bg-amber-600\">Upload Message</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst INITIAL_INTEGRATIONS = {\n  email: { connected: false, inboxes: [{ id: 1, address: \"support@company.com\", department: \"Support\", owner: \"Lisa\", priority: \"Medium\", status: \"Active\" }] },\n  instagram: { connected: false, handle: \"\" }, shopify: { connected: false, store: \"\" }, telephony: { connected: false, number: \"\" },\n};\n\nfunction IntegrationsScreen({ darkMode }) {\n  const [integrations, setIntegrations] = useState(INITIAL_INTEGRATIONS);\n  const [connectModal, setConnectModal] = useState(null);\n  const [showAddInbox, setShowAddInbox] = useState(false);\n  const [expandedDetails, setExpandedDetails] = useState({});\n  const connectedCount = Object.values(integrations).filter(v => v.connected).length;\n  const handleConnect = (type, val) => setIntegrations(p => ({ ...p, [type]: { ...p[type], connected: true, handle: val, store: val, number: val } }));\n  const handleDisconnect = (type) => setIntegrations(p => ({ ...p, [type]: { ...p[type], connected: false } }));\n  const handleAddInbox = (form) => setIntegrations(p => ({ ...p, email: { ...p.email, inboxes: [...p.email.inboxes, { id: Date.now(), ...form, status: \"Active\" }] } }));\n  const handleDeleteInbox = (id) => setIntegrations(p => ({ ...p, email: { ...p.email, inboxes: p.email.inboxes.filter(i => i.id !== id) } }));\n  const card = `rounded-xl border ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-200\"}`;\n  const CONFIGS = [\n    { type: \"email\", icon: \"âœ‰ï¸\", name: \"Email\", badge: \"Gmail / Outlook\", desc: \"Inbound email forwarding via Google Workspace\", details: { webhook: \"POST /api/ingest/email\", auth: \"OAuth 2.0 / SMTP\", events: [\"New email received\",\"Reply detected\",\"Bounce notification\"] } },\n    { type: \"instagram\", icon: \"ðŸ“¸\", name: \"Instagram (Meta)\", badge: \"Meta Business API\", desc: \"Direct messages and sales notifications\", details: { webhook: \"POST /api/ingest/instagram\", auth: \"Meta App Token\", events: [\"New DM received\",\"Story mention\",\"Comment on post\"] } },\n    { type: \"shopify\", icon: \"ðŸ›ï¸\", name: \"Shopify\", badge: \"Shopify Webhooks\", desc: \"Order and event notifications\", details: { webhook: \"POST /api/ingest/shopify\", auth: \"Shopify API Key\", events: [\"Order created\",\"Order fulfilled\",\"Refund requested\"] } },\n    { type: \"telephony\", icon: \"ðŸ“ž\", name: \"Telephony\", badge: \"Twilio / Flute\", desc: \"Call transcription and routing\", details: { webhook: \"POST /api/ingest/telephony\", auth: \"Twilio Auth Token\", events: [\"Call received\",\"Voicemail left\",\"Transcript ready\"] } },\n  ];\n  return (\n    <div className={`flex-1 overflow-y-auto p-4 ${darkMode ? \"bg-gray-900\" : \"bg-gray-50\"}`}>\n      <div className=\"max-w-3xl mx-auto\">\n        <h1 className={`text-lg font-bold mb-0.5 ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>Integrations</h1>\n        <p className={`text-xs mb-4 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>One integration surface powering all communication channels</p>\n        <div className=\"rounded-xl bg-amber-500 p-4 mb-4 text-white\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              <h2 className=\"font-bold text-sm mb-1\">Universal Ingestion Architecture</h2>\n              <p className=\"text-xs text-amber-100 mb-3\">All channels send normalised events to: <code className=\"bg-amber-700/50 text-amber-100 text-xs px-2 py-0.5 rounded font-mono\">POST /api/ingest</code></p>\n              <div className=\"grid grid-cols-2 gap-x-6 gap-y-1\">\n                <div><p className=\"text-xs font-semibold text-amber-200 mb-1\">What happens:</p>{[\"Store raw payload\",\"Create Draft task\",\"Run AI extraction\",\"Generate suggestions\"].map(s => <p key={s} className=\"text-xs text-amber-100\">â€¢ {s}</p>)}</div>\n                <div><p className=\"text-xs font-semibold text-amber-200 mb-1\">Human governance:</p>{[\"Review AI suggestions\",\"Edit or confirm routing\",\"Apply changes manually\",\"Full audit trail\"].map(s => <p key={s} className=\"text-xs text-amber-100\">â€¢ {s}</p>)}</div>\n              </div>\n            </div>\n            <div className={`ml-4 flex-shrink-0 rounded-lg px-4 py-3 text-center ${darkMode ? \"bg-gray-800\" : \"bg-white\"}`}>\n              <div className={`text-2xl font-bold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{connectedCount} <span className={`text-sm font-normal ${darkMode ? \"text-gray-400\" : \"text-gray-400\"}`}>/ 4</span></div>\n              <div className={`text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>Connected Channels</div>\n            </div>\n          </div>\n        </div>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4\">\n          {CONFIGS.map(({ type, icon, name, badge, desc, details }) => {\n            const isConnected = integrations[type]?.connected;\n            return (\n              <div key={type} className={card}>\n                <div className=\"p-4\">\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className={`w-9 h-9 rounded-lg flex items-center justify-center text-lg ${darkMode ? \"bg-gray-700\" : \"bg-gray-50 border border-gray-100\"}`}>{icon}</div>\n                      <div><div className={`text-sm font-semibold ${darkMode ? \"text-white\" : \"text-gray-900\"}`}>{name}</div><span className={`text-xs px-2 py-0.5 rounded-full ${darkMode ? \"bg-gray-700 text-gray-400\" : \"bg-gray-100 text-gray-500\"}`}>{badge}</span></div>\n                    </div>\n                    <div className=\"flex items-center gap-1\"><span className={`w-2 h-2 rounded-full ${isConnected ? \"bg-green-500\" : \"bg-gray-300\"}`} /><span className={`text-xs ${isConnected ? \"text-green-600\" : (darkMode ? \"text-gray-400\" : \"text-gray-400\")}`}>{isConnected ? \"Connected\" : \"Not Connected\"}</span></div>\n                  </div>\n                  <p className={`text-xs mb-3 ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>{desc}</p>\n                  {isConnected\n                    ? <button onClick={() => handleDisconnect(type)} className={`w-full text-xs py-2 rounded-lg border font-medium ${darkMode ? \"border-gray-600 text-gray-300 hover:bg-gray-700\" : \"border-gray-200 text-gray-600 hover:bg-gray-50\"}`}>Disconnect</button>\n                    : <button onClick={() => type === \"email\" ? setIntegrations(p => ({ ...p, email: { ...p.email, connected: true } })) : setConnectModal(type)} className=\"w-full bg-amber-500 text-white text-xs py-2 rounded-lg font-medium hover:bg-amber-600\">ðŸ”— Connect</button>}\n                </div>\n                {type === \"email\" && isConnected && (\n                  <div className={`border-t px-4 pb-4 ${darkMode ? \"border-gray-700\" : \"border-gray-100\"}`}>\n                    <div className=\"flex items-center justify-between mt-3 mb-2\">\n                      <span className={`text-xs font-medium ${darkMode ? \"text-gray-300\" : \"text-gray-600\"}`}>Managed Inboxes ({integrations.email.inboxes.length}/20)</span>\n                      <button onClick={() => setShowAddInbox(true)} className=\"text-xs text-amber-600 hover:text-amber-700 font-medium\">+ Add Inbox</button>\n                    </div>\n                    <div className={`rounded-lg overflow-hidden border text-xs ${darkMode ? \"border-gray-700\" : \"border-gray-100\"}`}>\n                      <table className=\"w-full\">\n                        <thead><tr className={darkMode ? \"bg-gray-700/50 text-gray-400\" : \"bg-gray-50 text-gray-500\"}><th className=\"text-left px-2 py-1.5 font-medium\">Inbox</th><th className=\"text-left px-2 py-1.5 font-medium\">Status</th><th className=\"px-2 py-1.5\" /></tr></thead>\n                        <tbody>{integrations.email.inboxes.map(inbox => <tr key={inbox.id} className={`border-t ${darkMode ? \"border-gray-700 text-gray-300\" : \"border-gray-50 text-gray-700\"}`}><td className=\"px-2 py-1.5 font-mono text-xs truncate max-w-[140px]\">{inbox.address}</td><td className=\"px-2 py-1.5\"><span className=\"text-green-600 bg-green-50 px-1.5 py-0.5 rounded text-xs\">Active</span></td><td className=\"px-2 py-1.5 flex gap-1 justify-end\"><button onClick={() => handleDeleteInbox(inbox.id)} className=\"p-1 rounded text-gray-400 hover:text-red-500\">ðŸ—‘ï¸</button></td></tr>)}</tbody>\n                      </table>\n                    </div>\n                  </div>\n                )}\n                <div className={`border-t ${darkMode ? \"border-gray-700\" : \"border-gray-100\"}`}>\n                  <button onClick={() => setExpandedDetails(p => ({ ...p, [type]: !p[type] }))} className={`w-full flex items-center justify-between px-4 py-2.5 text-xs ${darkMode ? \"text-gray-400 hover:bg-gray-700/50\" : \"text-gray-500 hover:bg-gray-50\"}`}>\n                    <span>Integration Details</span><span>{expandedDetails[type] ? \"â–²\" : \"â–¼\"}</span>\n                  </button>\n                  {expandedDetails[type] && (\n                    <div className={`px-4 pb-4 space-y-2 text-xs ${darkMode ? \"text-gray-400\" : \"text-gray-500\"}`}>\n                      <div><span className=\"font-medium\">Webhook:</span> <code className={`font-mono text-xs px-1 rounded ${darkMode ? \"bg-gray-700 text-amber-400\" : \"bg-gray-100 text-amber-600\"}`}>{details.webhook}</code></div>\n                      <div><span className=\"font-medium\">Auth:</span> {details.auth}</div>\n                      <div><span className=\"font-medium\">Events:</span><div className=\"mt-1\">{details.events.map(e => <div key={e} className=\"flex items-center gap-1\"><span className=\"text-green-500\">â€¢</span> {e}</div>)}</div></div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        {connectModal && (\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\" onClick={() => setConnectModal(null)}>\n            <div className={`rounded-xl shadow-2xl w-full max-w-md mx-4 p-5 ${darkMode ? \"bg-gray-800 text-white\" : \"bg-white text-gray-900\"}`} onClick={e => e.stopPropagation()}>\n              <h2 className=\"font-semibold mb-4 capitalize\">Connect {connectModal}</h2>\n              <input placeholder=\"Enter value...\" className={`w-full border rounded-lg px-3 py-2 text-sm mb-4 ${darkMode ? \"bg-gray-700 border-gray-600 text-white\" : \"bg-gray-50 border-gray-200\"}`} />\n              <div className=\"flex gap-3\"><button onClick={() => setConnectModal(null)} className={`flex-1 border rounded-lg py-2 text-sm ${darkMode ? \"border-gray-600 text-gray-300\" : \"border-gray-200 text-gray-600\"}`}>Cancel</button><button onClick={() => { handleConnect(connectModal, \"connected\"); setConnectModal(null); }} className=\"flex-1 bg-amber-500 text-white rounded-lg py-2 text-sm font-medium hover:bg-amber-600\">Connect</button></div>\n            </div>\n          </div>\n        )}\n        {showAddInbox && (\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\" onClick={() => setShowAddInbox(false)}>\n            <div className={`rounded-xl shadow-2xl w-full max-w-md mx-4 p-5 ${darkMode ? \"bg-gray-800 text-white\" : \"bg-white text-gray-900\"}`} onClick={e => e.stopPropagation()}>\n              <h2 className=\"font-semibold mb-4\">Add Inbox</h2>\n              <input placeholder=\"support@yourcompany.com\" className={`w-full border rounded-lg px-3 py-2 text-sm mb-4 ${darkMode ? \"bg-gray-700 border-gray-600 text-white\" : \"bg-gray-50 border-gray-200\"}`} />\n              <div className=\"flex gap-3\"><button onClick={() => setShowAddInbox(false)} className={`flex-1 border rounded-lg py-2 text-sm ${darkMode ? \"border-gray-600 text-gray-300\" : \"border-gray-200 text-gray-600\"}`}>Cancel</button><button onClick={() => { handleAddInbox({ address: \"new@company.com\", department: \"Support\", owner: \"\", priority: \"Medium\" }); setShowAddInbox(false); }} className=\"flex-1 bg-amber-500 text-white rounded-lg py-2 text-sm font-medium hover:bg-amber-600\">Add Inbox</button></div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction LoginScreen({ onLogin }) {\n  const [selected, setSelected] = useState(\"\");\n  return (\n    <div className=\"min-h-screen bg-amber-50 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-sm\">\n        <div className=\"text-center mb-8\">\n          <div className=\"w-20 h-20 bg-amber-500 rounded-2xl flex items-center justify-center text-4xl mx-auto mb-4 shadow-lg\">ðŸ</div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Beehive</h1>\n          <p className=\"text-gray-500 text-sm mt-1\">All of your messages stored, classified,<br />categorized and routed in one place!</p>\n        </div>\n        <div className=\"bg-white rounded-2xl shadow-lg p-6\">\n          <h2 className=\"font-semibold text-gray-900 mb-4\">Sign in to your account</h2>\n          <label className=\"text-xs text-gray-500 mb-1 block\">Select User</label>\n          <select value={selected} onChange={e => setSelected(e.target.value)} className=\"w-full border border-gray-200 rounded-xl px-4 py-3 text-sm text-gray-700 mb-4 bg-white\">\n            <option value=\"\">Choose an account...</option>\n            {USERS.map(u => <option key={u.id} value={u.id}>{u.name} - {u.role} ({u.department.toLowerCase()})</option>)}\n          </select>\n          <button onClick={() => selected && onLogin(+selected)} disabled={!selected} className=\"w-full bg-amber-500 disabled:bg-amber-300 text-white py-3 rounded-xl font-semibold text-sm hover:bg-amber-600 transition-colors\">Sign In</button>\n        </div>\n        <p className=\"text-center text-xs text-gray-400 mt-4\">Beehive Communications Hub Â© 2026</p>\n      </div>\n    </div>\n  );\n}\n\nexport default function App() {\n  const [currentUserId, setCurrentUserId] = useState(null);\n  const [view, setView] = useState(\"messages\");\n  const [messages, setMessages] = useState(INITIAL_MESSAGES);\n  const [darkMode, setDarkMode] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n  const [showUpload, setShowUpload] = useState(false);\n  const [showNotifs, setShowNotifs] = useState(false);\n\n  const currentUser = USERS.find(u => u.id === currentUserId);\n  const updateMessage = updated => setMessages(msgs => msgs.map(m => m.id === updated.id ? updated : m));\n  const addMessage = form => {\n    const newMsg = { id: messages.length + 1, from: form.contactName || \"Unknown\", subject: form.subject || \"(No Subject)\", body: form.body, channel: form.channel.toLowerCase(), priority: form.priority, confidence: form.confidence, department: form.department, status: \"pending\", assignedTo: form.assignedTo, date: new Date().toLocaleDateString(\"en-US\", { month: \"numeric\", day: \"numeric\", year: \"numeric\" }), contactInfo: form.contactInfo, priorityReason: `Manually uploaded with ${form.priority.toLowerCase()} priority.`, confidenceReason: `Manually classified with ${form.confidence}.`, internalNotes: [], changeLog: [], needsReview: form.confidence === \"Low Confidence\" };\n    setMessages(msgs => [newMsg, ...msgs]);\n  };\n\n  const ctx = { messages, updateMessage };\n\n  if (!currentUser) return (\n    <AppContext.Provider value={ctx}>\n      <LoginScreen onLogin={id => { setCurrentUserId(id); setView(\"messages\"); }} />\n    </AppContext.Provider>\n  );\n\n  const isManager = currentUser.role === \"Manager\";\n  const isAdmin = currentUser.role === \"Admin\";\n  const unreadCount = 2;\n\n  return (\n    <AppContext.Provider value={ctx}>\n      <div className={`h-screen flex flex-col overflow-hidden ${darkMode ? \"bg-gray-900\" : \"bg-gray-50\"}`}>\n        <Header view={view} setView={setView} currentUser={currentUser} darkMode={darkMode} onSettingsOpen={() => setShowSettings(true)} onNotifOpen={() => setShowNotifs(true)} unreadCount={unreadCount} />\n        <div className=\"flex-1 overflow-hidden flex flex-col\">\n          {view === \"integrations\" ? <IntegrationsScreen darkMode={darkMode} />\n            : view === \"messages\" ? <MessagesView isManager={isManager || isAdmin} currentUser={currentUser} darkMode={darkMode} />\n              : view === \"dashboard\" && (isManager || isAdmin) ? <ManagerDashboard currentUser={currentUser} onUpload={() => setShowUpload(true)} darkMode={darkMode} />\n                : view === \"dashboard\" ? <EmployeeDashboard currentUser={currentUser} darkMode={darkMode} />\n                  : <EmployeeDashboard currentUser={currentUser} darkMode={darkMode} />}\n        </div>\n        {showSettings && <SettingsModal user={currentUser} darkMode={darkMode} toggleDarkMode={() => setDarkMode(d => !d)} onLogout={() => { setCurrentUserId(null); setShowSettings(false); }} onClose={() => setShowSettings(false)} />}\n        {showUpload && <UploadModal onClose={() => setShowUpload(false)} onSubmit={addMessage} currentUser={currentUser} darkMode={darkMode} />}\n        {showNotifs && <NotificationPanel onClose={() => setShowNotifs(false)} darkMode={darkMode} />}\n      </div>\n    </AppContext.Provider>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}